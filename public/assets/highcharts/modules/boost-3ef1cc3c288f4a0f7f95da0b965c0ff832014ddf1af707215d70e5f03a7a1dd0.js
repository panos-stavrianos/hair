"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){!function(e){function t(){var e=Array.prototype.slice.call(arguments),t=-Number.MAX_VALUE;return y(e,function(e){if(null!=e&&"undefined"!=typeof e.length&&e.length>0)return t=e.length,!0}),t}function i(e){var i,o=0,r=0,n=!0;if("undefined"!=typeof e.boostForceChartBoost)return e.boostForceChartBoost;if(n=e.options.boost&&"undefined"!=typeof e.options.boost.allowForce?e.options.boost.allowForce:n,e.series.length>1)for(var a=0;a<e.series.length;a++)i=e.series[a],R[i.type]&&++r,t(i.processedXData,i.options.data,i.points)>=(i.options.boostThreshold||Number.MAX_VALUE)&&++o;return e.boostForceChartBoost=n&&r===e.series.length&&o>0||o>5,e.boostForceChartBoost}function o(e){function t(t,i){var o="vertex"===i?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(o);return e.shaderSource(r,t),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)&&r}function i(){function i(t){return e.getUniformLocation(m,t)}var o=t(B,"vertex"),r=t(D,"fragment");return o&&r?(m=e.createProgram(),e.attachShader(m,o),e.attachShader(m,r),e.linkProgram(m),e.useProgram(m),e.bindAttribLocation(m,0,"aVertexPosition"),x=i("uPMatrix"),y=i("pSize"),A=i("fillColor"),v=i("isBubble"),T=i("bubbleSizeAbs"),P=i("bubbleSizeByArea"),w=i("uSampler"),S=i("skipTranslation"),C=i("isCircle"),k=i("isInverted"),E=i("plotHeight"),!0):(m=!1,!1)}function o(){e&&m&&(e.deleteProgram(m),m=!1)}function r(){e.useProgram(m)}function n(t,i){var o=R[t]=R[t]||e.getUniformLocation(m,t);e.uniform1f(o,i)}function a(){e.uniform1i(w,0)}function s(t){e.uniform1i(k,t)}function l(t){e.uniform1i(C,t?1:0)}function f(t){e.uniform1f(E,t)}function u(){e.uniform1i(v,0),e.uniform1i(C,0)}function d(t,i,o){var r=t.options,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;"bubble"===t.type&&(a=M(r.zMin,Math.min(a,Math.max(i,!1===r.displayNegative?r.zThreshold:-Number.MAX_VALUE))),s=M(r.zMax,Math.max(s,o)),e.uniform1i(v,1),e.uniform1i(C,1),e.uniform1i(P,"width"!==t.options.sizeBy),e.uniform1i(T,t.options.sizeByAbsoluteValue),n("bubbleZMin",a),n("bubbleZMax",s),n("bubbleZThreshold",t.options.zThreshold),n("bubbleMinSize",t.minPxSize),n("bubbleMaxSize",t.maxPxSize))}function h(t){e.uniform4f(A,t[0]/255,t[1]/255,t[2]/255,t[3])}function c(t){e.uniform1i(S,!0===t?1:0)}function p(t){e.uniformMatrix4fv(x,!1,t)}function b(t){e.uniform1f(y,t)}function g(){return m}var m,x,y,A,v,T,P,S,C,k,E,w,B=["#version 100","precision highp float;","attribute vec4 aVertexPosition;","attribute vec4 aColor;","varying highp vec2 position;","varying highp vec4 vColor;","uniform mat4 uPMatrix;","uniform float pSize;","uniform float translatedThreshold;","uniform bool hasThreshold;","uniform bool skipTranslation;","uniform float plotHeight;","uniform float xAxisTrans;","uniform float xAxisMin;","uniform float xAxisMinPad;","uniform float xAxisPointRange;","uniform float xAxisLen;","uniform bool  xAxisPostTranslate;","uniform float xAxisOrdinalSlope;","uniform float xAxisOrdinalOffset;","uniform float xAxisPos;","uniform bool  xAxisCVSCoord;","uniform float yAxisTrans;","uniform float yAxisMin;","uniform float yAxisMinPad;","uniform float yAxisPointRange;","uniform float yAxisLen;","uniform bool  yAxisPostTranslate;","uniform float yAxisOrdinalSlope;","uniform float yAxisOrdinalOffset;","uniform float yAxisPos;","uniform bool  yAxisCVSCoord;","uniform bool  isBubble;","uniform bool  bubbleSizeByArea;","uniform float bubbleZMin;","uniform float bubbleZMax;","uniform float bubbleZThreshold;","uniform float bubbleMinSize;","uniform float bubbleMaxSize;","uniform bool  bubbleSizeAbs;","uniform bool  isInverted;","float bubbleRadius(){","float value = aVertexPosition.w;","float zMax = bubbleZMax;","float zMin = bubbleZMin;","float radius = 0.0;","float pos = 0.0;","float zRange = zMax - zMin;","if (bubbleSizeAbs){","value = value - bubbleZThreshold;","zMax = max(zMax - bubbleZThreshold, zMin - bubbleZThreshold);","zMin = 0.0;","}","if (value < zMin){","radius = bubbleZMin / 2.0 - 1.0;","} else {","pos = zRange > 0.0 ? (value - zMin) / zRange : 0.5;","if (bubbleSizeByArea && pos > 0.0){","pos = sqrt(pos);","}","radius = ceil(bubbleMinSize + pos * (bubbleMaxSize - bubbleMinSize)) / 2.0;","}","return radius * 2.0;","}","float translate(float val,","float pointPlacement,","float localA,","float localMin,","float minPixelPadding,","float pointRange,","float len,","bool  cvsCoord","){","float sign = 1.0;","float cvsOffset = 0.0;","if (cvsCoord) {","sign *= -1.0;","cvsOffset = len;","}","return sign * (val - localMin) * localA + cvsOffset + ","(sign * minPixelPadding);","}","float xToPixels(float value){","if (skipTranslation){","return value;// + xAxisPos;","}","return translate(value, 0.0, xAxisTrans, xAxisMin, xAxisMinPad, xAxisPointRange, xAxisLen, xAxisCVSCoord);// + xAxisPos;","}","float yToPixels(float value, float checkTreshold){","float v;","if (skipTranslation){","v = value;// + yAxisPos;","} else {","v = translate(value, 0.0, yAxisTrans, yAxisMin, yAxisMinPad, yAxisPointRange, yAxisLen, yAxisCVSCoord);// + yAxisPos;","if (v > plotHeight) {","v = plotHeight;","}","}","if (checkTreshold > 0.0 && hasThreshold) {","v = min(v, translatedThreshold);","}","return v;","}","void main(void) {","if (isBubble){","gl_PointSize = bubbleRadius();","} else {","gl_PointSize = pSize;","}","vColor = aColor;","if (isInverted) {","gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.y) + yAxisPos, yToPixels(aVertexPosition.x, aVertexPosition.z) + xAxisPos, 0.0, 1.0);","} else {","gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.x) + xAxisPos, yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, 0.0, 1.0);","}","}"].join("\n"),D=["precision highp float;","uniform vec4 fillColor;","varying highp vec2 position;","varying highp vec4 vColor;","uniform sampler2D uSampler;","uniform bool isCircle;","uniform bool hasColor;","void main(void) {","vec4 col = fillColor;","vec4 tcol;","if (hasColor) {","col = vColor;","}","if (isCircle) {","tcol = texture2D(uSampler, gl_PointCoord.st);","col *= tcol;","if (tcol.r < 0.0) {","discard;","} else {","gl_FragColor = col;","}","} else {","gl_FragColor = col;","}","}"].join("\n"),R={};return e&&i(),{psUniform:function(){return y},pUniform:function(){return x},fillColorUniform:function(){return A},setPlotHeight:f,setBubbleUniforms:d,bind:r,program:g,create:i,setUniform:n,setPMatrix:p,setColor:h,setPointSize:b,setSkipTranslation:c,setTexture:a,setDrawAsCircle:l,reset:u,setInverted:s,destroy:o}}function r(e,t,i){function o(){u&&(e.deleteBuffer(u),u=!1,d=!1),p=0,h=i||2,f=[]}function r(i,r,n){var a;return(f=i||[])&&0!==f.length||c?(h=n||h,u&&e.deleteBuffer(u),c||(a=new Float32Array(f)),u=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,c||a,e.STATIC_DRAW),d=e.getAttribLocation(t.program(),r),e.enableVertexAttribArray(d),a=!1,!0):(o(),!1)}function n(){if(!u)return!1;e.vertexAttribPointer(d,h,e.FLOAT,!1,0,0)}function a(t,i,o){var r=c?c.length:f.length;return!!u&&(!!r&&((!t||t>r||t<0)&&(t=0),(!i||i>r)&&(i=r),o=o||"points",e.drawArrays(e[o.toUpperCase()],t/h,(i-t)/h),!0))}function s(e,t,i,o){c&&(c[++p]=e,c[++p]=t,c[++p]=i,c[++p]=o)}function l(e){p=-1,c=new Float32Array(e*=4)}var f,u=!1,d=!1,h=i||2,c=!1,p=0;return{destroy:o,bind:n,data:f,build:r,render:a,allocate:l,push:s}}function n(t){function i(e){C(!0,Z,e)}function n(e){var t,i,o;return e.isSeriesBoosting?(t=!!e.options.stacking,i=e.xData||e.options.xData||e.processedXData,o=(t?e.data:i||e.options.data).length,"treemap"===e.type?o*=12:"heatmap"===e.type?o*=6:H[e.type]&&(o*=2),o):0}function a(e){var t=0;Z.usePreallocated&&(y(e.series,function(e){e.isSeriesBoosting&&(t+=n(e))}),R.allocate(t))}function s(e){var t=0;Z.usePreallocated&&(e.isSeriesBoosting&&(t=n(e)),R.allocate(t))}function l(e,t){var i=0,o=1;return[2/e,0,0,0,0,-2/t,0,0,0,0,-2/(o-i),0,-1,1,-(o+i)/(o-i),1]}function f(){z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT)}function u(){return z}function d(t,i){function o(e){e&&(i.colorData.push(e[0]),i.colorData.push(e[1]),i.colorData.push(e[2]),i.colorData.push(e[3]))}function r(e,t,i,r,n){o(n),Z.usePreallocated?R.push(e,t,i?1:0,r||1):(F.push(e),F.push(t),F.push(i?1:0),F.push(r||1))}function n(e,t,i,n,a){o(a),r(e+i,t),o(a),r(e,t),o(a),r(e,t+n),o(a),r(e,t+n),o(a),r(e+i,t+n),o(a),r(e+i,t)}function a(e){Z.useGPUTranslations||(i.skipTranslation=!0,e.x=B.toPixels(e.x,!0),e.y=w.toPixels(e.y,!0)),r(e.x,e.y,0,2)}var s,l,f,u,d,h,c,p=t.pointArrayMap&&"low,high"===t.pointArrayMap.join(","),b=t.chart,g=t.options,m=!!g.stacking,x=g.data,A=t.xAxis.getExtremes(),v=A.min,T=A.max,P=t.yAxis.getExtremes(),S=P.min,C=P.max,M=t.xData||g.xData||t.processedXData,k=t.yData||g.yData||t.processedYData,E=t.zData||g.zData||t.processedZData,w=t.yAxis,B=t.xAxis,D=t.chart.plotHeight,z=!M||0===M.length,_=t.points||!1,U=!1,L=!1,N=m?t.data:M||x,O={x:Number.MIN_VALUE,y:0},X={x:Number.MIN_VALUE,y:0},G=0,V=1,I=1,q=-1,W=!1,Y=!1,j="undefined"==typeof b.index,K=!1,J=!1,Q=!1,$=H[t.type],ee=!1,te=!0;if(!(g.boostData&&g.boostData.length>0)){if(t.closestPointRangePx=Number.MAX_VALUE,_&&_.length>0)return i.skipTranslation=!0,i.drawMode="triangles",_[0].node&&_[0].node.levelDynamic&&_.sort(function(e,t){if(e.node){if(e.node.levelDynamic>t.node.levelDynamic)return 1;if(e.node.levelDynamic<t.node.levelDynamic)return-1}return 0}),void y(_,function(i){var o,r,a,s=i.plotY;void 0===s||isNaN(s)||null===i.y||(o=i.shapeArgs,r=(a=i.series.pointAttribs(i))["stroke-width"]||0,(l=e.color(a.fill).rgba)[0]/=255,l[1]/=255,l[2]/=255,"treemap"===t.type&&(r=r||1,(f=e.color(a.stroke).rgba)[0]/=255,f[1]/=255,f[2]/=255,n(o.x,o.y,o.width,o.height,f),r/=2),"heatmap"===t.type&&b.inverted&&(o.x=B.len-o.x,o.y=w.len-o.y,o.width=-o.width,o.height=-o.height),n(o.x+r,o.y+r,o.width-2*r,o.height-2*r,l))});for(;q<N.length-1&&(h=N[++q],!j);)z?(u=h[0],d=h[1],N[q+1]&&(Y=N[q+1][0]),N[q-1]&&(W=N[q-1][0]),h.length>=3&&(c=h[2],h[2]>i.zMax&&(i.zMax=h[2]),h[2]<i.zMin&&(i.zMin=h[2]))):(u=h,d=k[q],N[q+1]&&(Y=N[q+1]),N[q-1]&&(W=N[q-1]),E&&E.length&&(c=E[q],E[q]>i.zMax&&(i.zMax=E[q]),E[q]<i.zMin&&(i.zMin=E[q]))),Y&&Y>=v&&Y<=T&&(K=!0),W&&W>=v&&W<=T&&(J=!0),p?(z&&(d=h.slice(1,3)),d[0],d=d[1]):m&&(u=h.x,(d=h.stackY)-h.y),t.requireSorting||(te=d>=S&&d<=C),u>T&&X.x<T&&(X.x=u,X.y=d),u<v&&O.x<v&&(O.x=u,O.y=d),(0===d||d&&te)&&(u>=v&&u<=T&&(ee=!0),(ee||K||J)&&(Z.useGPUTranslations||(i.skipTranslation=!0,u=B.toPixels(u,!0),(d=w.toPixels(d,!0))>D&&(d=D)),$&&(d,s=0,d<0&&(s=d,d=0),Z.useGPUTranslations||(s=w.toPixels(s,!0)),r(u,s,0,0,Q)),i.hasMarkers&&!1!==U&&(t.closestPointRangePx=Math.min(t.closestPointRangePx,Math.abs(u-U))),!Z.useGPUTranslations&&!Z.usePreallocated&&U&&u-U<V&&L&&Math.abs(d-L)<I?Z.debug.showSkipSummary&&++G:(g.step&&r(u,L,0,2,Q),r(u,d,0,"bubble"===t.type?c||1:2,Q),U=u,L=d)));Z.debug.showSkipSummary&&console.log("skipped points:",G),U||(a(O),a(X))}}function h(e){G.length>0&&(G[G.length-1].to=F.length,G[G.length-1].hasMarkers&&(G[G.length-1].markerTo=L.length)),Z.debug.timeSeriesProcessing&&console.time("building "+e.type+" series"),G.push({from:F.length,markerFrom:L.length,colorData:[],series:e,zMin:Number.MAX_VALUE,zMax:-Number.MAX_VALUE,hasMarkers:!!e.options.marker&&!1!==e.options.marker.enabled,showMarksers:!0,drawMode:{area:"lines",arearange:"lines",areaspline:"line_strip",column:"lines",bar:"lines",line:"line_strip",scatter:"points",heatmap:"triangles",treemap:"triangles",bubble:"points"}[e.type]||"line_strip"}),d(e,G[G.length-1]),Z.debug.timeSeriesProcessing&&console.timeEnd("building "+e.type+" series")}function p(){G=[],O.data=F=[],L=[],R&&R.destroy()}function b(e){D&&(D.setUniform("xAxisTrans",e.transA),D.setUniform("xAxisMin",e.min),D.setUniform("xAxisMinPad",e.minPixelPadding),D.setUniform("xAxisPointRange",e.pointRange),D.setUniform("xAxisLen",e.len),D.setUniform("xAxisPos",e.pos),D.setUniform("xAxisCVSCoord",!e.horiz))}function m(e){D&&(D.setUniform("yAxisTrans",e.transA),D.setUniform("yAxisMin",e.min),D.setUniform("yAxisMinPad",e.minPixelPadding),D.setUniform("yAxisPointRange",e.pointRange),D.setUniform("yAxisLen",e.len),D.setUniform("yAxisPos",e.pos),D.setUniform("yAxisCVSCoord",!e.horiz))}function x(e,t){D.setUniform("hasThreshold",e),D.setUniform("translatedThreshold",t)}function A(i){return!!i&&(!i.chartHeight||i.chartWidth,_=i.chartWidth||800,U=i.chartHeight||400,!!(z&&_&&U)&&(Z.debug.timeRendering&&console.time("gl rendering"),z.canvas.width=_,z.canvas.height=U,D.bind(),z.viewport(0,0,_,U),D.setPMatrix(l(_,U)),D.setPlotHeight(i.plotHeight),Z.lineWidth>1&&!e.isMS&&z.lineWidth(Z.lineWidth),R.build(O.data,"aVertexPosition",4),R.bind(),N&&(z.bindTexture(z.TEXTURE_2D,B),D.setTexture(B)),D.setInverted(i.inverted),y(G,function(t,i){var o,n,a=t.series.options,s=a.threshold,l=S(s),f=t.series.yAxis.getThreshold(s),u=M(a.marker?a.marker.enabled:null,!!t.series.xAxis.isRadial||null,t.series.closestPointRangePx>2*((a.marker?a.marker.radius:10)||10)),d=t.series.pointAttribs&&t.series.pointAttribs().fill||t.series.color;t.series.fillOpacity&&a.fillOpacity&&(d=new g(d).setOpacity(M(a.fillOpacity,1)).get()),a.colorByPoint&&(d=t.series.chart.options.colors[i]),n=e.color(d).rgba,Z.useAlpha||(n[3]=1),"lines"===t.drawMode&&Z.useAlpha&&n[3]<1&&(n[3]/=10),"add"===a.boostBlending?(z.blendFunc(z.SRC_ALPHA,z.ONE),z.blendEquation(z.FUNC_ADD)):"mult"===a.boostBlending?z.blendFunc(z.DST_COLOR,z.ZERO):"darken"===a.boostBlending?(z.blendFunc(z.ONE,z.ONE),z.blendEquation(z.FUNC_MIN)):z.blendFuncSeparate(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA,z.ONE,z.ONE_MINUS_SRC_ALPHA),D.reset(),t.colorData.length>0&&(D.setUniform("hasColor",1),(o=r(z,D)).build(t.colorData,"aColor",4),o.bind()),D.setColor(n),b(t.series.xAxis),m(t.series.yAxis),x(l,f),"points"===t.drawMode&&(a.marker&&a.marker.radius?D.setPointSize(2*a.marker.radius):D.setPointSize(1)),D.setSkipTranslation(t.skipTranslation),"bubble"===t.series.type&&D.setBubbleUniforms(t.series,t.zMin,t.zMax),D.setDrawAsCircle(q[t.series.type]&&N||!1),R.render(t.from,t.to,t.drawMode),t.hasMarkers&&u&&(a.marker&&a.marker.radius?D.setPointSize(2*a.marker.radius):D.setPointSize(10),D.setDrawAsCircle(!0),R.render(t.from,t.to,"POINTS"))}),Z.debug.timeRendering&&console.timeEnd("gl rendering"),t&&t(),void p()))}function v(e){if(f(),e.renderer.forExport)return A(e);X?A(e):setTimeout(function(){v(e)},1)}function T(e,t){_===e&&t==t||(_=e,U=t,D.bind(),D.setPMatrix(l(_,U)))}function P(e,t){var i=0,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"];if(X=!1,!e)return!1;for(Z.debug.timeSetup&&console.time("gl setup");i<n.length&&!(z=e.getContext(n[i],{}));i++);if(!z)return!1;t||p(),z.enable(z.BLEND),z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA),z.disable(z.DEPTH_TEST),z.depthFunc(z.LESS),D=o(z),R=r(z,D),N=!1,B=z.createTexture(),V.width=512,V.height=512,I.mozImageSmoothingEnabled=!1,I.webkitImageSmoothingEnabled=!1,I.msImageSmoothingEnabled=!1,I.imageSmoothingEnabled=!1,I.strokeStyle="rgba(255, 255, 255, 0)",I.fillStyle="#FFF",I.beginPath(),I.arc(256,256,256,0,2*Math.PI),I.stroke(),I.fill();try{z.bindTexture(z.TEXTURE_2D,B),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,z.RGBA,z.UNSIGNED_BYTE,V),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.bindTexture(z.TEXTURE_2D,null),N=!0}catch(a){}return X=!0,Z.debug.timeSetup&&console.timeEnd("gl setup"),!0}function k(){return!1!==z}function E(){return X}function w(){p(),R.destroy(),D.destroy(),z&&(B&&z.deleteTexture(B),z.canvas.width=1,z.canvas.height=1)}var B,D=!1,R=!1,z=!1,_=0,U=0,F=!1,L=!1,N=!1,O={},X=!1,G=[],V=c.createElement("canvas"),I=V.getContext("2d"),H={column:!0,bar:!0,area:!0},q={scatter:!0,bubble:!0},Z={pointSize:1,lineWidth:1,fillColor:"#AA00AA",useAlpha:!0,usePreallocated:!1,useGPUTranslations:!1,debug:{timeRendering:!1,timeSeriesProcessing:!1,timeSetup:!1,timeBufferCopy:!1,timeKDTree:!1,showSkipSummary:!1}};return O={allocateBufferForSingleSeries:s,pushSeries:h,setSize:T,inited:E,setThreshold:x,init:P,render:v,settings:Z,valid:k,clear:f,flush:p,setXAxis:b,setYAxis:m,data:F,gl:u,allocateBuffer:a,destroy:w,setOptions:i}}function a(t,i){var o=t.chartWidth,r=t.chartHeight,a=t,s=t.seriesGroup||i.group,l=1,f=c.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1");return f=!1,(a=t.isChartSeriesBoosting()?t:i).renderTarget||(a.canvas=B,t.renderer.forExport||!f?(a.renderTarget=t.renderer.image("",0,0,o,r).add(s),a.boostClear=function(){a.renderTarget.attr({href:""})},a.boostCopy=function(){a.boostResizeTarget(),a.renderTarget.attr({href:a.canvas.toDataURL("image/png")})}):(a.renderTargetFo=t.renderer.createElement("foreignObject").add(s),a.renderTarget=c.createElement("canvas"),a.renderTargetCtx=a.renderTarget.getContext("2d"),a.renderTargetFo.element.appendChild(a.renderTarget),a.boostClear=function(){a.renderTarget.width=a.canvas.width,a.renderTarget.height=a.canvas.height},a.boostCopy=function(){a.renderTarget.width=a.canvas.width,a.renderTarget.height=a.canvas.height,a.renderTargetCtx.drawImage(a.canvas,0,0)}),a.boostResizeTarget=function(){o=t.chartWidth,r=t.chartHeight,(a.renderTargetFo||a.renderTarget).attr({x:0,y:0,width:o,height:r,style:"pointer-events: none; mix-blend-mode: normal; opacity:"+l}),a instanceof e.Chart&&a.markerGroup.translate(i.xAxis.pos,i.yAxis.pos)},a.boostClipRect=t.renderer.clipRect(),(a.renderTargetFo||a.renderTarget).clip(a.boostClipRect),a instanceof e.Chart&&(a.markerGroup=a.renderer.g().add(s),a.markerGroup.translate(i.xAxis.pos,i.yAxis.pos))),a.canvas.width=o,a.canvas.height=r,a.boostClipRect.attr(t.getBoostClipRect(a)),a.boostResizeTarget(),a.boostClear(),a.ogl||(a.ogl=n(function(){a.ogl.settings.debug.timeBufferCopy&&console.time("buffer copy"),a.boostCopy(),a.ogl.settings.debug.timeBufferCopy&&console.timeEnd("buffer copy")}),a.ogl.init(a.canvas),a.ogl.setOptions(t.options.boost||{}),a instanceof e.Chart&&a.ogl.allocateBuffer(t)),a.ogl.setSize(o,r),a.ogl}function s(e,t,i){e&&t.renderTarget&&t.canvas&&!(i||t.chart).isChartSeriesBoosting()&&e.render(i||t.chart)}function l(e,t){e&&t.renderTarget&&t.canvas&&!t.chart.isChartSeriesBoosting()&&e.allocateBufferForSingleSeries(t)}function f(){var e,t=0,i=["webgl","experimental-webgl","moz-webgl","webkit-3d"];if("undefined"!=typeof h.WebGLRenderingContext)for(e=c.createElement("canvas");t<i.length;t++)try{if(null!=e.getContext(i[t]))return!0}catch(o){}return!1}function u(e){var t,i=!0;if(this.chart.options&&this.chart.options.boost&&(i="undefined"==typeof this.chart.options.boost.enabled||this.chart.options.boost.enabled),!i||!this.isSeriesBoosting)return e.call(this);this.chart.isBoosting=!0,(t=a(this.chart,this))&&(l(t,this),t.pushSeries(this)),s(t,this)}var d,h=e.win,c=h.document,p=function(){},b=e.Chart,g=e.Color,m=e.Series,x=e.seriesTypes,y=e.each,A=e.extend,v=e.addEvent,T=e.fireEvent,P=e.grep,S=e.isNumber,C=e.merge,M=e.pick,k=e.wrap,E=e.getOptions().plotOptions,w=3e4,B=c.createElement("canvas"),D=["area","arearange","column","bar","line","scatter","heatmap","bubble","treemap"],R={};y(D,function(e){R[e]=1}),g.prototype.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},b.prototype.isChartSeriesBoosting=function(){var e=50;return(e=this.options.boost&&"undefined"!=typeof this.options.boost.seriesThreshold?this.options.boost.seriesThreshold:e)<=this.series.length||i(this)},b.prototype.getBoostClipRect=function(e){var t={x:this.plotLeft,y:this.plotTop,width:this.plotWidth,height:this.plotHeight};return e===this&&y(this.yAxis,function(e){t.y=Math.min(e.pos,t.y),t.height=Math.max(e.pos-this.plotTop+e.len,t.height)},this),t},e.eachAsync=function(t,i,o,r,n,a){for(var s=(n=n||0)+(r=r||w),l=!0;l&&n<s&&n<t.length;)l=i(t[n],n),++n;l&&(n<t.length?a?e.eachAsync(t,i,o,r,n,a):h.requestAnimationFrame?h.requestAnimationFrame(function(){e.eachAsync(t,i,o,r,n)}):setTimeout(function(){e.eachAsync(t,i,o,r,n)}):o&&o())},m.prototype.getPoint=function(e){var t=e,i=this.xData||this.options.xData||this.processedXData||!1;return!e||e instanceof this.pointClass||((t=(new this.pointClass).init(this,this.options.data[e.i],i?i[e.i]:undefined)).category=t.x,t.dist=e.dist,t.distX=e.distX,t.plotX=e.plotX,t.plotY=e.plotY,t.index=e.i),t},k(m.prototype,"searchPoint",function(e){return this.getPoint(e.apply(this,[].slice.call(arguments,1)))}),k(m.prototype,"destroy",function(e){var t=this,i=t.chart;i.markerGroup===t.markerGroup&&(t.markerGroup=null),i.hoverPoints&&(i.hoverPoints=P(i.hoverPoints,function(e){return e.series===t})),i.hoverPoint&&i.hoverPoint.series===t&&(i.hoverPoint=null),e.call(this)}),k(m.prototype,"getExtremes",function(e){if(!this.isSeriesBoosting||!this.hasExtremes||!this.hasExtremes())return e.apply(this,Array.prototype.slice.call(arguments,1))}),y(D,function(e){E[e]&&(E[e].boostThreshold=5e3,E[e].boostData=[],x[e].prototype.fillOpacity=!0)}),y(["translate","generatePoints","drawTracker","drawPoints","render"],function(e){function t(t){var i=this.options.stacking&&("translate"===e||"generatePoints"===e),o=!0;this.chart&&this.chart.options&&this.chart.options.boost&&(o="undefined"==typeof this.chart.options.boost.enabled||this.chart.options.boost.enabled),this.isSeriesBoosting&&!i&&o&&"heatmap"!==this.type&&"treemap"!==this.type?this[e+"Canvas"]&&this[e+"Canvas"]():t.call(this)}k(m.prototype,e,t),"translate"===e&&(x.column&&k(x.column.prototype,e,t),x.bar&&k(x.bar.prototype,e,t),x.arearange&&k(x.arearange.prototype,e,t),x.treemap&&k(x.treemap.prototype,e,t),x.heatmap&&k(x.heatmap.prototype,e,t))}),k(m.prototype,"processData",function(e){function t(e){return i.chart.isChartSeriesBoosting()||(e?e.length:0)>=(i.options.boostThreshold||Number.MAX_VALUE)}var i=this,o=this.options.data;t(o)&&"heatmap"!==this.type&&"treemap"!==this.type&&this.hasExtremes&&this.hasExtremes(!0)||(e.apply(this,Array.prototype.slice.call(arguments,1)),o=this.processedXData),this.isSeriesBoosting=t(o),this.isSeriesBoosting?this.enterBoost():this.exitBoost&&this.exitBoost()}),k(m.prototype,"setVisible",function(e,t,i){e.call(this,t,i),!1===this.visible&&this.canvas&&this.renderTarget&&(this.ogl&&this.ogl.clear(),this.boostClear())}),m.prototype.enterBoost=function(){this.alteredByBoost=[],y(["allowDG","directTouch","stickyTracking"],function(e){this.alteredByBoost.push({prop:e,val:this[e],own:this.hasOwnProperty(e)})},this),this.allowDG=!1,this.directTouch=!1,this.stickyTracking=!0,this.animate=null,this.labelBySeries&&(this.labelBySeries=this.labelBySeries.destroy())},m.prototype.exitBoost=function(){y(this.alteredByBoost||[],function(e){e.own?this[e.prop]=e.val:delete this[e.prop]},this),this.boostClear&&this.boostClear()},m.prototype.hasExtremes=function(e){var t=this.options,i=t.data,o=this.xAxis&&this.xAxis.options,r=this.yAxis&&this.yAxis.options;return i.length>(t.boostThreshold||Number.MAX_VALUE)&&S(r.min)&&S(r.max)&&(!e||S(o.min)&&S(o.max))},m.prototype.destroyGraphics=function(){var e,t,i=this,o=this.points;if(o)for(t=0;t<o.length;t+=1)(e=o[t])&&e.graphic&&(e.graphic=e.graphic.destroy());y(["graph","area","tracker"],function(e){i[e]&&(i[e]=i[e].destroy())})},f()?(e.extend(m.prototype,{renderCanvas:function(){function t(e,t){var i,r,a,s,l,d="undefined"==typeof x.index,c=!0;return d||(X?(i=e[0],r=e[1]):(i=e,r=P[t]),F?(X&&(r=e.slice(1,3)),l=r[0],r=r[1]):L&&(i=e.x,l=(r=e.stackY)-e.y),O||(c=r>=w&&r<=B),!(null===r)&&i>=M&&i<=k&&c&&(a=Math.ceil(y.toPixels(i,!0)),R?(u!==undefined&&a!==o||(F||(l=r),(h===undefined||r>f)&&(f=r,h=t),(u===undefined||l<n)&&(n=l,u=t)),a!==o&&(u!==undefined&&(s=A.toPixels(f,!0),U=A.toPixels(n,!0),V(a,s,h),U!==s&&V(a,U,u)),u=h=undefined,o=a)):(s=Math.ceil(A.toPixels(r,!0)),V(a,s,t)))),!d}function i(){T(b,"renderedCanvas"),delete b.buildKDTree,b.buildKDTree(),c.debug.timeKDTree&&console.timeEnd("kd tree building")}var o,r,n,f,u,h,c,b=this,g=b.options||{},m=!1,x=b.chart,y=this.xAxis,A=this.yAxis,v=g.xData||b.processedXData,P=g.yData||b.processedYData,S=g.data,C=y.getExtremes(),M=C.min,k=C.max,E=A.getExtremes(),w=E.min,B=E.max,D={},R=!!b.sampling,z=!1!==g.enableMouseTracking,_=g.threshold,U=A.getThreshold(_),F=b.pointArrayMap&&"low,high"===b.pointArrayMap.join(","),L=!!g.stacking,N=b.cropStart||0,O=b.requireSorting,X=!v,G=this.xData||this.options.xData||this.processedXData||!1,V=function(e,t,i){d=e+","+t,z&&!D[d]&&(D[d]=!0,x.inverted&&(e=y.len-e,t=A.len-t),r.push({x:!!G&&G[N+i],clientX:e,plotX:e,plotY:t,i:N+i}))};m=a(x,b),x.isBoosting=!0,c=m.settings,this.visible&&((this.points||this.graph)&&(this.animate=null,this.destroyGraphics()),x.isChartSeriesBoosting()?this.markerGroup=x.markerGroup:this.markerGroup=b.plotGroup("markerGroup","markers",!0,1,x.seriesGroup),r=this.points=[],b.buildKDTree=p,m&&(l(m,this),m.pushSeries(b),s(m,this,x)),x.renderer.forExport||(c.debug.timeKDTree&&console.time("kd tree building"),e.eachAsync(L?b.data:v||S,t,i)))}}),y(["heatmap","treemap"],function(e){x[e]&&k(x[e].prototype,"drawPoints",u)}),x.bubble&&(delete x.bubble.prototype.buildKDTree,k(x.bubble.prototype,"markerAttribs",function(e){return!this.isSeriesBoosting&&e.apply(this,[].slice.call(arguments,1))})),x.scatter.prototype.fill=!0,A(x.area.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),A(x.column.prototype,{fill:!0,sampling:!0}),e.Chart.prototype.callbacks.push(function(e){function t(){e.ogl&&e.isChartSeriesBoosting()&&e.ogl.render(e)}function o(){e.boostForceChartBoost=undefined,e.boostForceChartBoost=i(e),e.isBoosting=!1,!e.isChartSeriesBoosting()&&e.didBoost&&(e.didBoost=!1),e.boostClear&&e.boostClear(),e.canvas&&e.ogl&&e.isChartSeriesBoosting()&&(e.didBoost=!0,e.ogl.allocateBuffer(e)),e.markerGroup&&e.xAxis&&e.xAxis.length>0&&e.yAxis&&e.yAxis.length>0&&e.markerGroup.translate(e.xAxis[0].pos,e.yAxis[0].pos)}v(e,"predraw",o),v(e,"render",t)})):"undefined"!=typeof e.initCanvasBoost?e.initCanvasBoost():e.error(26)}(e)});