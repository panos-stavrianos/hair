"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,a,n,i,r;a=(e=t).defined,n=e.each,i=e.noop,r=e.seriesTypes,e.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(t){var e=this,a=t?"show":"hide";n(["graphic","dataLabel"],function(t){e[t]&&e[t][a]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:i,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:r.column.prototype.pointAttribs,translateColors:function(){var t=this,e=this.options.nullColor,a=this.colorAxis,i=this.colorKey;n(this.data,function(n){var r,o=n[i];(r=n.options.color||(n.isNull?e:a&&o!==undefined?a.toColor(o,n):n.color||t.color))&&(n.color=r)})},colorAttribs:function(t){var e={};return a(t.color)&&(e[this.colorProp||"fill"]=t.color),e}},function(t){var e=t.colorPointMixin,a=t.colorSeriesMixin,n=t.each,i=t.LegendSymbolMixin,r=t.merge,o=t.noop,s=t.pick,l=t.Series,p=t.seriesType,h=t.seriesTypes;p("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}},r(a,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;h.scatter.prototype.init.apply(this,arguments),(t=this.options).pointRange=s(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,e=t.options,a=t.xAxis,i=t.yAxis,r=e.pointPadding||0,o=function(t,e,a){return Math.min(Math.max(e,t),a)};t.generatePoints(),n(t.points,function(t){var n=(e.colsize||1)/2,l=(e.rowsize||1)/2,p=o(Math.round(a.len-a.translate(t.x-n,0,1,0,1)),-a.len,2*a.len),h=o(Math.round(a.len-a.translate(t.x+n,0,1,0,1)),-a.len,2*a.len),d=o(Math.round(i.translate(t.y-l,0,1,0,1)),-i.len,2*i.len),c=o(Math.round(i.translate(t.y+l,0,1,0,1)),-i.len,2*i.len),u=s(t.pointPadding,r);t.plotX=t.clientX=(p+h)/2,t.plotY=(d+c)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(p,h)+u,y:Math.min(d,c)+u,width:Math.abs(h-p)-2*u,height:Math.abs(c-d)-2*u}}),t.translateColors()},drawPoints:function(){h.column.prototype.drawPoints.call(this),n(this.points,function(t){t.graphic.attr(this.colorAttribs(t))},this)},animate:o,getBox:o,drawLegendSymbol:i.drawRectangle,alignDataLabel:h.column.prototype.alignDataLabel,getExtremes:function(){l.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,l.prototype.getExtremes.call(this)}}),t.extend({haloPath:function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]}},e))}(t),function(t){var e=t.seriesType,a=t.each,n=t.reduce,i=t.pick,r=function(t,e,a){return Math.min(Math.max(e,t),a)},o=function(t,e,a){var n=t.options;return{xPad:(n.colsize||1)/-e,yPad:(n.rowsize||1)/-a}};t.tileShapeTypes={hexagon:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return o(t,3,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return["M",e.x2-t,e.y1+t,"L",e.x3+t,e.y1+t,e.x4+1.5*t,e.y2,e.x3+t,e.y3-t,e.x2-t,e.y3-t,e.x1-1.5*t,e.y2,"Z"]},translate:function(){var t,e=this,n=e.options,o=e.xAxis,s=e.yAxis,l=n.pointPadding||0,p=(n.colsize||1)/3,h=(n.rowsize||1)/2;e.generatePoints(),a(e.points,function(e){var a=r(Math.floor(o.len-o.translate(e.x-2*p,0,1,0,1)),-o.len,2*o.len),n=r(Math.floor(o.len-o.translate(e.x-p,0,1,0,1)),-o.len,2*o.len),d=r(Math.floor(o.len-o.translate(e.x+p,0,1,0,1)),-o.len,2*o.len),c=r(Math.floor(o.len-o.translate(e.x+2*p,0,1,0,1)),-o.len,2*o.len),u=r(Math.floor(s.translate(e.y-h,0,1,0,1)),-s.len,2*s.len),y=r(Math.floor(s.translate(e.y,0,1,0,1)),-s.len,2*s.len),x=r(Math.floor(s.translate(e.y+h,0,1,0,1)),-s.len,2*s.len),g=i(e.pointPadding,l),f=g*Math.abs(n-a)/Math.abs(x-y),M=o.reversed?-f:f,P=o.reversed?-g:g,v=s.reversed?-g:g;e.x%2&&(u+=t=t||Math.round(Math.abs(x-u)/2)*(s.reversed?-1:1),y+=t,x+=t),e.plotX=e.clientX=(n+d)/2,e.plotY=y,a+=M+P,n+=P,d-=P,c-=M+P,u-=v,x+=v,e.tileEdges={x1:a,x2:n,x3:d,x4:c,y1:u,y2:y,y3:x},e.shapeType="path",e.shapeArgs={d:["M",n,u,"L",d,u,c,y,d,x,n,x,a,y,"Z"]}}),e.translateColors()}},diamond:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return o(t,2,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return["M",e.x2,e.y1+t,"L",e.x3+t,e.y2,e.x2,e.y3-t,e.x1-t,e.y2,"Z"]},translate:function(){var t,e=this,n=e.options,o=e.xAxis,s=e.yAxis,l=n.pointPadding||0,p=n.colsize||1,h=(n.rowsize||1)/2;e.generatePoints(),a(e.points,function(e){var a=r(Math.round(o.len-o.translate(e.x-p,0,1,0,0)),-o.len,2*o.len),n=r(Math.round(o.len-o.translate(e.x,0,1,0,0)),-o.len,2*o.len),d=r(Math.round(o.len-o.translate(e.x+p,0,1,0,0)),-o.len,2*o.len),c=r(Math.round(s.translate(e.y-h,0,1,0,0)),-s.len,2*s.len),u=r(Math.round(s.translate(e.y,0,1,0,0)),-s.len,2*s.len),y=r(Math.round(s.translate(e.y+h,0,1,0,0)),-s.len,2*s.len),x=i(e.pointPadding,l),g=x*Math.abs(n-a)/Math.abs(y-u),f=o.reversed?-g:g,M=s.reversed?-x:x;e.x%2&&(c+=t=Math.abs(y-c)/2*(s.reversed?-1:1),u+=t,y+=t),e.plotX=e.clientX=n,e.plotY=u,a+=f,d-=f,c-=M,y+=M,e.tileEdges={x1:a,x2:n,x3:d,y1:c,y2:u,y3:y},e.shapeType="path",e.shapeArgs={d:["M",n,c,"L",d,u,n,y,a,u,"Z"]}}),e.translateColors()}},circle:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return o(t,2,2)},haloPath:function(e){return t.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,e+(e&&this.radius))},translate:function(){var t,e,n,i,o=this,s=o.options,l=o.xAxis,p=o.yAxis,h=s.pointPadding||0,d=(s.rowsize||1)/2,c=s.colsize||1,u=!1;o.generatePoints(),a(o.points,function(a){var o=r(Math.round(l.len-l.translate(a.x,0,1,0,0)),-l.len,2*l.len),s=r(Math.round(p.translate(a.y,0,1,0,0)),-p.len,2*p.len),y=h,x=!1;a.pointPadding!==undefined&&(y=a.pointPadding,x=!0,u=!0),i&&!u||(t=Math.abs(r(Math.floor(l.len-l.translate(a.x+c,0,1,0,0)),-l.len,2*l.len)-o),e=Math.abs(r(Math.floor(p.translate(a.y+d,0,1,0,0)),-p.len,2*p.len)-s),n=Math.floor(Math.sqrt(t*t+e*e)/2),i=Math.min(t,n,e)-y,u&&!x&&(u=!1)),a.x%2&&(s+=e*(p.reversed?-1:1)),a.plotX=a.clientX=o,a.plotY=s,a.radius=i,a.shapeType="circle",a.shapeArgs={x:o,y:s,r:i}}),o.translateColors()}},square:{alignDataLabel:t.seriesTypes.heatmap.prototype.alignDataLabel,translate:t.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:t.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}},t.wrap(t.Axis.prototype,"setAxisTranslation",function(e){e.apply(this,Array.prototype.slice.call(arguments,1));var a=this,i=n(t.map(a.series,function(t){return t.getSeriesPixelPadding&&t.getSeriesPixelPadding(a)}),function(t,e){return(t&&t.padding)>(e&&e.padding)?t:e})||{padding:0,axisLengthFactor:1},r=Math.round(i.padding*i.axisLengthFactor);i.padding&&(a.len-=r,e.apply(a,Array.prototype.slice.call(arguments,1)),a.minPixelPadding+=i.padding,a.len+=r)}),e("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var e=t.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));return this.tileShape=t.tileShapeTypes[e.tileShape],e},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(t){var e,a,n=t.isXAxis,i=this.tileShape.getSeriesPadding(this);return i?(e=Math.round(t.translate(n?2*i.xPad:i.yPad,0,1,0,1)),a=Math.round(t.translate(n?i.xPad:0,0,1,0,1)),{padding:Math.abs(e-a)||0,axisLengthFactor:n?2:1.1}):{padding:0,axisLengthFactor:1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},t.extend({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},t.colorPointMixin))}(t)});