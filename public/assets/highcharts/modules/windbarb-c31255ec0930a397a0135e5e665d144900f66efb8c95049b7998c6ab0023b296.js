"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,r,i,o;!function(t,e){var r=t.each;(0,t.seriesType)("windbarb","column",{lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:"<b>{series.name}</b>: {point.value} ({point.beaufort})<br/>"},vectorLength:20,yOffset:-20},{pointArrayMap:["value","direction"],parallelArrays:["x","value","direction"],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],trackerGroups:["markerGroup"],pointAttribs:function(t,e){var r=this.options,i=this.color,o=this.options.lineWidth;return e&&(i=r.states[e].color||i,o=(r.states[e].lineWidth||o)+(r.states[e].lineWidthPlus||0)),{stroke:i,"stroke-width":o}},markerAttribs:function(){return undefined},windArrow:function(t){var e,r,i=1.943844*t.value,o=t.beaufortLevel,n=this.options.vectorLength/20,s=-10;if(t.isNull)return[];if(0===o)return this.chart.renderer.symbols.circle(-10*n,-10*n,20*n,20*n);if(e=["M",0,7*n,"L",-1.5*n,7*n,0,10*n,1.5*n,7*n,0,7*n,0,-10*n],(r=(i-i%50)/50)>0)for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",5*n,s*n+2,"L",0,s*n+4),i-=50,s+=7;if((r=(i-i%10)/10)>0)for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",7*n,s*n),i-=10,s+=3;if((r=(i-i%5)/5)>0)for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",4*n,s*n),i-=5,s+=3;return e},translate:function(){var t=this.beaufortFloor,i=this.beaufortName;e.translate.call(this),r(this.points,function(e){for(var r=0;r<t.length&&!(t[r]>e.value);r++);e.beaufortLevel=r-1,e.beaufort=i[r-1]})},drawPoints:function(){var t=this.chart,e=this.yAxis;r(this.points,function(r){var i=r.plotX,o=r.plotY;r.graphic||(r.graphic=this.chart.renderer.path().add(this.markerGroup)),r.graphic.attr({d:this.windArrow(r),translateX:i,translateY:o+this.options.yOffset,rotation:r.direction}).attr(this.pointAttribs(r)),r.tooltipPos=t.inverted?[e.len+e.pos-t.plotLeft-o,this.xAxis.len-i]:[i,o+e.pos-t.plotTop+this.options.yOffset-this.options.vectorLength/2]},this)},animate:function(e){e?this.markerGroup.attr({opacity:.01}):(this.markerGroup.animate({opacity:1},t.animObject(this.options.animation)),this.animate=null)}},{isValid:function(){return t.isNumber(this.value)&&this.value>=0}})}(t,(r=(e=t).each,i=e.seriesTypes,o=e.stableSort,{translate:function(){i.column.prototype.translate.apply(this);var t,e,n,s,a,l,p=this,u=p.options,h=p.chart,c=p.points,f=c.length-1,d=u.onSeries,b=d&&h.get(d),x=u.onKey||"y",m=b&&b.options.step,v=b&&b.points,g=v&&v.length,y=p.xAxis,L=p.yAxis,k=y.getExtremes(),A=0;if(b&&b.visible&&g)for(A=(b.pointXOffset||0)+(b.barW||0)/2,l=b.currentDataGrouping,s=v[g-1].x+(l?l.totalRange:0),o(c,function(t,e){return t.x-e.x}),x="plot"+x[0].toUpperCase()+x.substr(1);g--&&c[f]&&(t=c[f],!((n=v[g]).x<=t.x&&n[x]!==undefined&&(t.x<=s&&(t.plotY=n[x],n.x<t.x&&!m&&(a=v[g+1])&&a[x]!==undefined&&(t.plotY+=(t.x-n.x)/(a.x-n.x)*(a[x]-n[x]))),g++,--f<0))););r(c,function(t,r){var i;t.plotY===undefined&&(t.x>=k.min&&t.x<=k.max?t.plotY=h.chartHeight-y.bottom-(y.opposite?y.height:0)+y.offset-L.top:t.shapeArgs={}),t.plotX+=A,(e=c[r-1])&&e.plotX===t.plotX&&(e.stackIndex===undefined&&(e.stackIndex=0),i=e.stackIndex+1),t.stackIndex=i})}}))});