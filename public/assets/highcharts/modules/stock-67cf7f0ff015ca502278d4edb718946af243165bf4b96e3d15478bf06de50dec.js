"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,i,o,r,a,n,s,l,h,c,p,d,u,g;i=(e=t).addEvent,o=e.Axis,r=e.Chart,a=e.css,n=e.dateFormat,s=e.defined,l=e.each,h=e.extend,c=e.noop,p=e.pick,d=e.Series,u=e.timeUnits,(g=e.wrap)(d.prototype,"init",function(t){var e,o=this;t.apply(this,Array.prototype.slice.call(arguments,1)),(e=o.xAxis)&&e.options.ordinal&&i(o,"updatedData",function(){delete e.ordinalIndex})}),g(o.prototype,"getTimeTicks",function(t,e,i,o,r,a,l,h){var c,p,d,g,f,x,m=0,v={},b=[],y=-Number.MAX_VALUE,M=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!a||a.length<3||i===undefined)return t.call(this,e,i,o,r);for(f=a.length,c=0;c<f;c++){if(x=c&&a[c-1]>o,a[c]<i&&(m=c),c===f-1||a[c+1]-a[c]>5*l||x){if(a[c]>y){for(p=t.call(this,e,a[m],a[c],r);p.length&&p[0]<=y;)p.shift();p.length&&(y=p[p.length-1]),b=b.concat(p)}m=c+1}if(x)break}if(g=p.info,h&&g.unitRange<=u.hour){for(c=b.length-1,m=1;m<c;m++)n("%d",b[m])!==n("%d",b[m-1])&&(v[b[m]]="day",d=!0);d&&(v[b[0]]="day"),g.higherRanks=v}if(b.info=g,h&&s(M)){for(var k,A,w,S,B,P=b.length,D=P,T=[],C=[];D--;)A=this.translate(b[D]),w&&(C[D]=w-A),T[D]=w=A;for(C.sort(),(S=C[Math.floor(C.length/2)])<.6*M&&(S=null),D=b[P-1]>o?P-1:P,w=undefined;D--;)A=T[D],B=Math.abs(w-A),w&&B<.8*M&&(null===S||B<.8*S)?(v[b[D]]&&!v[b[D+1]]?(k=D+1,w=A):k=D,b.splice(k,1)):w=A}return b}),h(o.prototype,{beforeSetTickPositions:function(){var t,e,i,o,r,a,n=this,h=[],c=!1,d=n.getExtremes(),u=d.min,g=d.max,f=n.isXAxis&&!!n.options.breaks,x=n.options.ordinal,m=Number.MAX_VALUE,v=n.chart.options.chart.ignoreHiddenSeries,b="highcharts-navigator-xaxis"===n.options.className;if(!n.options.overscroll||n.max!==n.dataMax||n.chart.mouseIsDown&&!b||n.eventArgs&&(!n.eventArgs||"navigator"===n.eventArgs.trigger)||(n.max+=n.options.overscroll,!b&&s(n.userMin)&&(n.min+=n.options.overscroll)),x||f){if(l(n.series,function(e,i){if((!v||!1!==e.visible)&&(!1!==e.takeOrdinalPosition||f)&&(h=h.concat(e.processedXData),t=h.length,h.sort(function(t,e){return t-e}),m=Math.min(m,p(e.closestPointRange,m)),t))for(i=t-1;i--;)h[i]===h[i+1]&&h.splice(i,1)}),(t=h.length)>2){for(e=h[1]-h[0],a=t-1;a--&&!c;)h[a+1]-h[a]!==e&&(c=!0);!n.options.keepOrdinalPadding&&(h[0]-u>e||g-h[h.length-1]>e)&&(c=!0)}else n.options.overscroll&&(2===t?m=h[1]-h[0]:1===t?(m=n.options.overscroll,h=[h[0],h[0]+m]):m=n.overscrollPointsRange);c?(n.options.overscroll&&(n.overscrollPointsRange=m,h=h.concat(n.getOverscrollPositions())),n.ordinalPositions=h,i=n.ordinal2lin(Math.max(u,h[0]),!0),o=Math.max(n.ordinal2lin(Math.min(g,h[h.length-1]),!0),1),n.ordinalSlope=r=(g-u)/(o-i),n.ordinalOffset=u-i*r):(n.overscrollPointsRange=p(n.closestPointRange,n.overscrollPointsRange),n.ordinalPositions=n.ordinalSlope=n.ordinalOffset=undefined)}n.isOrdinal=x&&c,n.groupIntervalFactor=null},val2lin:function(t,e){var i,o=this,r=o.ordinalPositions;if(r){var a,n,s=r.length;for(a=s;a--;)if(r[a]===t){n=a;break}for(a=s-1;a--;)if(t>r[a]||0===a){n=a+(t-r[a])/(r[a+1]-r[a]);break}i=e?n:o.ordinalSlope*(n||0)+o.ordinalOffset}else i=t;return i},lin2val:function(t,e){var i=this,o=i.ordinalPositions;if(o){var r,a,n=i.ordinalSlope,s=i.ordinalOffset,l=o.length-1;if(e)t<0?t=o[0]:t>l?t=o[l]:a=t-(l=Math.floor(t));else for(;l--;)if(t>=(r=n*l+s)){a=(t-r)/(n*(l+1)+s-r);break}return a!==undefined&&o[l]!==undefined?o[l]+(a?a*(o[l+1]-o[l]):0):t}return t},getExtendedPositions:function(){var t,e,i=this,r=i.chart,a=i.series[0].currentDataGrouping,n=i.ordinalIndex,s=a?a.count+a.unitName:"raw",h=i.options.overscroll,p=i.getExtremes();return n||(n=i.ordinalIndex={}),n[s]||(t={series:[],chart:r,getExtremes:function(){return{min:p.dataMin,max:p.dataMax+h}},options:{ordinal:!0},val2lin:o.prototype.val2lin,ordinal2lin:o.prototype.ordinal2lin},l(i.series,function(o){(e={xAxis:t,xData:o.xData.slice(),chart:r,destroyGroupedData:c}).xData=e.xData.concat(i.getOverscrollPositions()),e.options={dataGrouping:a?{enabled:!0,forced:!0,approximation:"open",units:[[a.unitName,[a.count]]]}:{enabled:!1}},o.processData.apply(e),t.series.push(e)}),i.beforeSetTickPositions.apply(t),n[s]=t.ordinalPositions),n[s]},getOverscrollPositions:function(){var t=this,i=t.options.overscroll,o=t.overscrollPointsRange,r=[],a=t.dataMax;if(e.defined(o))for(r.push(a);a<=t.dataMax+i;)a+=o,r.push(a);return r},getGroupIntervalFactor:function(t,e,i){var o,r,a=i.processedXData,n=a.length,s=[],l=this.groupIntervalFactor;if(!l){for(o=0;o<n-1;o++)s[o]=a[o+1]-a[o];s.sort(function(t,e){return t-e}),r=s[Math.floor(n/2)],t=Math.max(t,a[0]),e=Math.min(e,a[n-1]),this.groupIntervalFactor=l=n*r/(e-t)}return l},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?this.options.breaks?this.closestPointRange||t:t/(e/this.closestPointRange):t}}),o.prototype.ordinal2lin=o.prototype.val2lin,g(r.prototype,"pan",function(t,e){var i=this,o=i.xAxis[0],r=o.options.overscroll,n=e.chartX,s=!1;if(o.options.ordinal&&o.series.length){var h,c,p,d,u=i.mouseDownX,g=o.getExtremes(),f=g.dataMax,x=g.min,m=g.max,v=i.hoverPoints,b=o.closestPointRange||o.overscrollPointsRange,y=(u-n)/(o.translationSlope*(o.ordinalSlope||b)),M={ordinalPositions:o.getExtendedPositions()},k=o.lin2val,A=o.val2lin;M.ordinalPositions?Math.abs(y)>1&&(v&&l(v,function(t){t.setState()}),y<0?(p=M,d=o.ordinalPositions?o:M):(p=o.ordinalPositions?o:M,d=M),f>(c=d.ordinalPositions)[c.length-1]&&c.push(f),i.fixedRange=m-x,(h=o.toFixedRange(null,null,k.apply(p,[A.apply(p,[x,!0])+y,!0]),k.apply(d,[A.apply(d,[m,!0])+y,!0]))).min>=Math.min(g.dataMin,x)&&h.max<=Math.max(f,m)+r&&o.setExtremes(h.min,h.max,!0,!1,{trigger:"pan"}),i.mouseDownX=n,a(i.container,{cursor:"move"})):s=!0}else s=!0;s&&(r&&(o.max=o.dataMax+r),t.apply(this,Array.prototype.slice.call(arguments,1)))}),function(t){function e(){return Array.prototype.slice.call(arguments,1)}function i(t){t.apply(this),this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,o(this.pointArrayMap,["y"]))}var o=t.pick,r=t.wrap,a=t.each,n=t.extend,s=t.isArray,l=t.fireEvent,h=t.Axis,c=t.Series;n(h.prototype,{isInBreak:function(t,e){var i=t.repeat||Infinity,o=t.from,r=t.to-t.from,a=e>=o?(e-o)%i:i-(o-e)%i;return t.inclusive?a<=r:a<r&&0!==a},isInAnyBreak:function(t,e){var i,r,a,n=this.options.breaks,s=n&&n.length;if(s){for(;s--;)this.isInBreak(n[s],t)&&(i=!0,r||(r=o(n[s].showPoints,!this.isXAxis)));a=i&&e?i&&!r:i}return a}}),r(h.prototype,"setTickPositions",function(t){if(t.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var e,i=this,o=this.tickPositions,r=this.tickPositions.info,a=[];for(e=0;e<o.length;e++)i.isInAnyBreak(o[e])||a.push(o[e]);this.tickPositions=a,this.tickPositions.info=r}}),r(h.prototype,"init",function(t,e,i){var r,n=this;i.breaks&&i.breaks.length&&(i.ordinal=!1),t.call(this,e,i),r=this.options.breaks,n.isBroken=s(r)&&!!r.length,n.isBroken&&(n.val2lin=function(t){var e,i,o=t;for(i=0;i<n.breakArray.length;i++)if((e=n.breakArray[i]).to<=t)o-=e.len;else{if(e.from>=t)break;if(n.isInBreak(e,t)){o-=t-e.from;break}}return o},n.lin2val=function(t){var e,i,o=t;for(i=0;i<n.breakArray.length&&!((e=n.breakArray[i]).from>=o);i++)e.to<o?o+=e.len:n.isInBreak(e,o)&&(o+=e.len);return o},n.setExtremes=function(t,e,i,o,r){for(;this.isInAnyBreak(t);)t-=this.closestPointRange;for(;this.isInAnyBreak(e);)e-=this.closestPointRange;h.prototype.setExtremes.call(this,t,e,i,o,r)},n.setAxisTranslation=function(t){h.prototype.setAxisTranslation.call(this,t);var e,i,r,s,c=n.options.breaks,p=[],d=[],u=0,g=n.userMin||n.min,f=n.userMax||n.max,x=o(n.pointRangePadding,0);a(c,function(t){i=t.repeat||Infinity,n.isInBreak(t,g)&&(g+=t.to%i-g%i),n.isInBreak(t,f)&&(f-=f%i-t.from%i)}),a(c,function(t){for(r=t.from,i=t.repeat||Infinity;r-i>g;)r-=i;for(;r<g;)r+=i;for(s=r;s<f;s+=i)p.push({value:s,move:"in"}),p.push({value:s+(t.to-t.from),move:"out",size:t.breakSize})}),p.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),e=0,r=g,a(p,function(t){1===(e+="in"===t.move?1:-1)&&"in"===t.move&&(r=t.value),0===e&&(d.push({from:r,to:t.value,len:t.value-r-(t.size||0)}),u+=t.value-r-(t.size||0))}),n.breakArray=d,n.unitLength=f-g-u+x,l(n,"afterBreaks"),n.options.staticScale?n.transA=n.options.staticScale:n.unitLength&&(n.transA*=(f-n.min+x)/n.unitLength),x&&(n.minPixelPadding=n.transA*n.minPointOffset),n.min=g,n.max=f})}),r(c.prototype,"generatePoints",function(t){t.apply(this,e(arguments));var i,o=this,r=o.xAxis,a=o.yAxis,n=o.points,s=n.length,l=o.options.connectNulls;if(r&&a&&(r.options.breaks||a.options.breaks))for(;s--;)null===(i=n[s]).y&&!1===l||!r.isInAnyBreak(i.x,!0)&&!a.isInAnyBreak(i.y,!0)||(n.splice(s,1),this.data[s]&&this.data[s].destroyElements())}),t.Series.prototype.drawBreaks=function(t,e){var i,r,n,s,h=this,c=h.points;t&&a(e,function(e){i=t.breakArray||[],r=t.isXAxis?t.min:o(h.options.threshold,t.min),a(c,function(h){s=o(h["stack"+e.toUpperCase()],h[e]),a(i,function(e){n=!1,r<e.from&&s>e.to||r>e.from&&s<e.from?n="pointBreak":(r<e.from&&s>e.from&&s<e.to||r>e.from&&s>e.to&&s<e.from)&&(n="pointInBreak"),n&&l(t,n,{point:h,brk:e})})})})},t.Series.prototype.gappedPath=function(){var e,i=this.options.gapSize,o=this.points.slice(),r=o.length-1,a=this.yAxis;if(i&&r>0)for("value"!==this.options.gapUnit&&(i*=this.closestPointRange);r--;)o[r+1].x-o[r].x>i&&(e=(o[r].x+o[r+1].x)/2,o.splice(r+1,0,{isNull:!0,x:e}),this.options.stacking&&((a.stacks[this.stackKey][e]=new t.StackItem(a,a.options.stackLabels,!1,e,this.stack)).total=0));return this.getGraphPath(o)},r(t.seriesTypes.column.prototype,"drawPoints",i),r(t.Series.prototype,"drawPoints",i)}(t),function(t){var e=t.arrayMax,i=t.arrayMin,o=t.Axis,r=t.defaultPlotOptions,a=t.defined,n=t.each,s=t.extend,l=t.format,h=t.isNumber,c=t.merge,p=t.pick,d=t.Point,u=t.Series,g=t.Tooltip,f=t.wrap,x=u.prototype,m=x.processData,v=x.generatePoints,b=x.destroy,y={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},M={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},k=t.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],A=t.approximations={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,i=A.sum(t);return h(i)&&e&&(i/=e),i},averages:function(){var t=[];return n(arguments,function(e){t.push(A.average(e))}),t[0]===undefined?undefined:t},open:function(t){return t.length?t[0]:t.hasNulls?null:undefined},high:function(t){return t.length?e(t):t.hasNulls?null:undefined},low:function(t){return t.length?i(t):t.hasNulls?null:undefined},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:undefined},ohlc:function(t,e,i,o){if(t=A.open(t),e=A.high(e),i=A.low(i),o=A.close(o),h(t)||h(e)||h(i)||h(o))return[t,e,i,o]},range:function(t,e){return t=A.low(t),e=A.high(e),h(t)||h(e)?[t,e]:null===t&&null===e?null:void 0}};x.groupData=function(t,e,i,o){var r,a,s,l,c,p,d=this,u=d.data,g=d.options.data,f=[],x=[],m=[],v=t.length,b=!!e,k=[],w="function"==typeof o?o:A[o]||M[d.type]&&A[M[d.type].approximation]||A[y.approximation],S=d.pointArrayMap,B=S&&S.length,P=0,D=0;for(B?n(S,function(){k.push([])}):k.push([]),l=B||1,c=0;c<=v&&!(t[c]>=i[0]);c++);for(;c<=v;c++){for(;i[P+1]!==undefined&&t[c]>=i[P+1]||c===v;){for(r=i[P],d.dataGroupInfo={start:D,length:k[0].length},(s=w.apply(d,k))!==undefined&&(f.push(r),x.push(s),m.push(d.dataGroupInfo)),D=c,p=0;p<l;p++)k[p].length=0,k[p].hasNulls=!1;if(P+=1,c===v)break}if(c===v)break;if(S){var T,C=d.cropStart+c,E=u&&u[C]||d.pointClass.prototype.applyOptions.apply({series:d},[g[C]]);for(p=0;p<B;p++)T=E[S[p]],h(T)?k[p].push(T):null===T&&(k[p].hasNulls=!0)}else a=b?e[c]:null,h(a)?k[0].push(a):null===a&&(k[0].hasNulls=!0)}return[f,x,m]},x.processData=function(){var t,e,i=this,o=i.chart,r=i.options.dataGrouping,n=!1!==i.allowDG&&r&&p(r.enabled,o.options.isStock),s=i.visible||!o.options.chart.ignoreHiddenSeries,l=this.currentDataGrouping;if(i.forceCrop=n,i.groupPixelWidth=null,i.hasProcessed=!0,!(!1===m.apply(i,arguments)||!n)){i.destroyGroupedData();var h,c=i.processedXData,d=i.processedYData,u=o.plotSizeX,g=i.xAxis,f=g.options.ordinal,v=i.groupPixelWidth=g.getGroupPixelWidth&&g.getGroupPixelWidth();if(v){t=!0,i.isDirty=!0,i.points=null;var b=g.getExtremes(),y=b.min,M=b.max,A=v*(M-y)/u*(f&&g.getGroupIntervalFactor(y,M,i)||1),w=g.getTimeTicks(g.normalizeTimeTickInterval(A,r.units||k),Math.min(y,c[0]),Math.max(M,c[c.length-1]),g.options.startOfWeek,c,i.closestPointRange),S=x.groupData.apply(i,[c,d,w,r.approximation]),B=S[0],P=S[1];if(r.smoothed&&B.length){for(B[h=B.length-1]=Math.min(B[h],M);h--&&h>0;)B[h]+=A/2;B[0]=Math.max(B[0],y)}e=w.info,i.closestPointRange=w.info.totalRange,i.groupMap=S[2],a(B[0])&&B[0]<g.dataMin&&s&&(g.min===g.dataMin&&(g.min=B[0]),g.dataMin=B[0]),i.processedXData=B,i.processedYData=P}else i.groupMap=null;i.hasGroupedData=t,i.currentDataGrouping=e,i.preventGraphAnimation=(l&&l.totalRange)!==(e&&e.totalRange)}},x.destroyGroupedData=function(){var t=this.groupedData;n(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)}),this.groupedData=null},x.generatePoints=function(){v.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},f(d.prototype,"update",function(e){this.dataGroup?t.error(24):e.apply(this,[].slice.call(arguments,1))}),f(g.prototype,"tooltipFooterHeaderFormatter",function(e,i,o){var r,a,n,c,p,d=this,u=i.series,g=u.options,f=u.tooltipOptions,x=g.dataGrouping,m=f.xDateFormat,v=u.xAxis,b=t.dateFormat;return v&&"datetime"===v.options.type&&x&&h(i.key)?(a=u.currentDataGrouping,n=x.dateTimeLabelFormats,a?(c=n[a.unitName],1===a.count?m=c[0]:(m=c[1],r=c[2])):!m&&n&&(m=d.getXDateFormat(i,f,v)),p=b(m,i.key),r&&(p+=b(r,i.key+a.totalRange-1)),l(f[(o?"footer":"header")+"Format"],{point:s(i.point,{key:p}),series:u})):e.call(d,i,o)}),x.destroy=function(){for(var t=this,e=t.groupedData||[],i=e.length;i--;)e[i]&&e[i].destroy();b.apply(t)},f(x,"setOptions",function(t,e){var i=t.call(this,e),o=this.type,a=this.chart.options.plotOptions,n=r[o].dataGrouping;return M[o]&&(n||(n=c(y,M[o])),i.dataGrouping=c(n,a.series&&a.series.dataGrouping,a[o].dataGrouping,e.dataGrouping)),this.chart.options.isStock&&(this.requireSorting=!0),i}),f(o.prototype,"setScale",function(t){t.call(this),n(this.series,function(t){t.hasProcessed=!1})}),o.prototype.getGroupPixelWidth=function(){var t,e,i,o=this.series,r=o.length,a=0,n=!1;for(t=r;t--;)(i=o[t].options.dataGrouping)&&(a=Math.max(a,i.groupPixelWidth));for(t=r;t--;)(i=o[t].options.dataGrouping)&&o[t].hasProcessed&&(e=(o[t].processedXData||o[t].data).length,(o[t].groupPixelWidth||e>this.chart.plotSizeX/a||e&&i.forced)&&(n=!0));return n?a:0},o.prototype.setDataGrouping=function(t,e){var i;if(e=p(e,!0),t||(t={forced:!1,units:null}),this instanceof o)for(i=this.series.length;i--;)this.series[i].update({dataGrouping:t},!1);else n(this.chart.options.series,function(e){e.dataGrouping=t},!1);e&&this.chart.redraw()}}(t),function(t){var e=t.each,i=t.Point,o=t.seriesType,r=t.seriesTypes;o("ohlc","column",{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0},{directTouch:!1,pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"close",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointAttribs:function(t,e){var i=r.column.prototype.pointAttribs.call(this,t,e),o=this.options;return delete i.fill,!t.options.color&&o.upColor&&t.open<t.close&&(i.stroke=o.upColor),i},translate:function(){var t=this,i=t.yAxis,o=!!t.modifyValue,a=["plotOpen","plotHigh","plotLow","plotClose","yBottom"];r.column.prototype.translate.apply(t),e(t.points,function(r){e([r.open,r.high,r.low,r.close,r.low],function(e,n){null!==e&&(o&&(e=t.modifyValue(e)),r[a[n]]=i.toPixels(e,!0))}),r.tooltipPos[1]=r.plotHigh+i.pos-t.chart.plotTop})},drawPoints:function(){var t=this,i=t.points,o=t.chart;e(i,function(e){var i,r,a,n,s,l,h=e.graphic,c=!h;e.plotY!==undefined&&(h||(e.graphic=h=o.renderer.path().add(t.group)),h.attr(t.pointAttribs(e,e.selected&&"select")),a=h.strokeWidth()%2/2,l=Math.round(e.plotX)-a,n=Math.round(e.shapeArgs.width/2),s=["M",l,Math.round(e.yBottom),"L",l,Math.round(e.plotHigh)],null!==e.open&&(i=Math.round(e.plotOpen)+a,s.push("M",l,i,"L",l-n,i)),null!==e.close&&(r=Math.round(e.plotClose)+a,s.push("M",l,r,"L",l+n,r)),h[c?"attr":"animate"]({d:s}).addClass(e.getClassName(),!0))})},animate:null},{getClassName:function(){return i.prototype.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}})}(t),function(t){var e=t.defaultPlotOptions,i=t.each,o=t.merge,r=t.seriesType,a=t.seriesTypes,n={states:{hover:{lineWidth:2}},tooltip:e.ohlc.tooltip,threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0};r("candlestick","ohlc",o(e.column,n),{pointAttribs:function(t,e){var i,o=a.column.prototype.pointAttribs.call(this,t,e),r=this.options,n=t.open<t.close,s=r.lineColor||this.color;return o["stroke-width"]=r.lineWidth,o.fill=t.options.color||n&&r.upColor||this.color,o.stroke=t.lineColor||n&&r.upLineColor||s,e&&(i=r.states[e],o.fill=i.color||o.fill,o.stroke=i.lineColor||o.stroke,o["stroke-width"]=i.lineWidth||o["stroke-width"]),o},drawPoints:function(){var t=this,e=t.points,o=t.chart;i(e,function(e){var i,r,a,n,s,l,h,c,p,d,u=e.graphic,g=!u;e.plotY!==undefined&&(u||(e.graphic=u=o.renderer.path().add(t.group)),u.attr(t.pointAttribs(e,e.selected&&"select")).shadow(t.options.shadow),h=u.strokeWidth()%2/2,c=Math.round(e.plotX)-h,i=e.plotOpen,r=e.plotClose,a=Math.min(i,r),n=Math.max(i,r),d=Math.round(e.shapeArgs.width/2),s=Math.round(a)!==Math.round(e.plotHigh),l=n!==e.yBottom,a=Math.round(a)+h,n=Math.round(n)+h,(p=[]).push("M",c-d,n,"L",c-d,a,"L",c+d,a,"L",c+d,n,"Z","M",c,a,"L",c,s?Math.round(e.plotHigh):a,"M",c,n,"L",c,l?Math.round(e.yBottom):n),u[g?"attr":"animate"]({d:p}).addClass(e.getClassName(),!0))})}})}(t),function(t,e){var i=t.addEvent,o=t.each,r=t.merge,a=t.noop,n=t.Renderer,s=t.Series,l=t.seriesType,h=t.SVGRenderer,c=t.TrackerMixin,p=t.VMLRenderer,d=h.prototype.symbols;l("flags","column",{pointRange:0,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd6eb"}},style:{fontSize:"11px",fontWeight:"bold"}},{sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:s.prototype.init,pointAttribs:function(t,e){var i=this.options,o=t&&t.color||this.color,r=i.lineColor,a=t&&t.lineWidth,n=t&&t.fillColor||i.fillColor;return e&&(n=i.states[e].fillColor,r=i.states[e].lineColor,a=i.states[e].lineWidth),{fill:n||o,stroke:r||o,"stroke-width":a||i.lineWidth||0}},translate:e.translate,drawPoints:function(){var e,i,a,n,s,l,h,c,p,d=this,u=d.points,g=d.chart,f=g.renderer,x=d.options,m=x.y,v=d.yAxis,b={},y=[];for(n=u.length;n--;)p=(s=u[n]).plotX>d.xAxis.len,e=s.plotX,h=s.stackIndex,a=s.options.shape||x.shape,(i=s.plotY)!==undefined&&(i=s.plotY+m-(h!==undefined&&h*x.stackDistance)),s.anchorX=h?undefined:s.plotX,c=h?undefined:s.plotY,l=s.graphic,i!==undefined&&e>=0&&!p?(l||(l=s.graphic=f.label("",null,null,a,null,null,x.useHTML).attr(d.pointAttribs(s)).css(r(x.style,s.style)).attr({align:"flag"===a?"left":"center",width:x.width,height:x.height,"text-align":x.textAlign}).addClass("highcharts-point").add(d.markerGroup),s.graphic.div&&(s.graphic.div.point=s),l.shadow(x.shadow),l.isNew=!0),e>0&&(e-=l.strokeWidth()%2),l.attr({text:s.options.title||x.title||"A"})[l.isNew?"attr":"animate"]({y:i,anchorY:c}),b[s.plotX]?b[s.plotX].size=Math.max(b[s.plotX].size,l.width):b[s.plotX]={align:0,size:l.width,target:e,anchorX:e},s.tooltipPos=g.inverted?[v.len+v.pos-g.plotLeft-i,d.xAxis.len-e]:[e,i+v.pos-g.plotTop]):l&&(s.graphic=l.destroy());t.objectEach(b,function(t){t.plotX=t.anchorX,y.push(t)}),t.distribute(y,this.xAxis.len),o(u,function(t){var e=t.graphic&&b[t.plotX];e&&(t.graphic[t.graphic.isNew?"attr":"animate"]({x:e.pos,anchorX:t.anchorX}),t.graphic.isNew=!1)}),x.useHTML&&t.wrap(d.markerGroup,"on",function(e){return t.SVGElement.prototype.on.apply(e.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})},drawTracker:function(){var t=this.points;c.drawTrackerPoint.apply(this),o(t,function(e){var r=e.graphic;r&&i(r.element,"mouseover",function(){e.stackIndex>0&&!e.raised&&(e._y=r.y,r.attr({y:e._y-8}),e.raised=!0),o(t,function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:a,buildKDTree:a,setClip:a}),d.flag=function(t,e,i,o,r){var a=r&&r.anchorX||t,n=r&&r.anchorY||e;return d.circle(a-1,n-1,2,2).concat(["M",a,n,"L",t,e+o,t,e,t+i,e,t+i,e+o,t,e+o,"Z"])},o(["circle","square"],function(t){d[t+"pin"]=function(e,i,o,r,a){var n,s,l=a&&a.anchorX,h=a&&a.anchorY;return"circle"===t&&r>o&&(e-=Math.round((r-o)/2),o=r),n=d[t](e,i,o,r),l&&h&&(s=i>h?i:i+r,n.push("M","circle"===t?n[1]-n[4]:n[1]+n[4]/2,s,"L",l,h),n=n.concat(d.circle(l-1,h-1,2,2))),n}}),n===p&&o(["flag","circlepin","squarepin"],function(t){p.prototype.symbols[t]=d[t]})}(t,function(t){var e=t.each,i=t.seriesTypes,o=t.stableSort;return{translate:function(){i.column.prototype.translate.apply(this);var t,r,a,n,s,l,h=this,c=h.options,p=h.chart,d=h.points,u=d.length-1,g=c.onSeries,f=g&&p.get(g),x=c.onKey||"y",m=f&&f.options.step,v=f&&f.points,b=v&&v.length,y=h.xAxis,M=h.yAxis,k=y.getExtremes(),A=0;if(f&&f.visible&&b)for(A=(f.pointXOffset||0)+(f.barW||0)/2,l=f.currentDataGrouping,n=v[b-1].x+(l?l.totalRange:0),o(d,function(t,e){return t.x-e.x}),x="plot"+x[0].toUpperCase()+x.substr(1);b--&&d[u]&&(t=d[u],!((a=v[b]).x<=t.x&&a[x]!==undefined&&(t.x<=n&&(t.plotY=a[x],a.x<t.x&&!m&&(s=v[b+1])&&s[x]!==undefined&&(t.plotY+=(t.x-a.x)/(s.x-a.x)*(s[x]-a[x]))),b++,--u<0))););e(d,function(t,e){var i;t.plotY===undefined&&(t.x>=k.min&&t.x<=k.max?t.plotY=p.chartHeight-y.bottom-(y.opposite?y.height:0)+y.offset-M.top:t.shapeArgs={}),t.plotX+=A,(r=d[e-1])&&r.plotX===t.plotX&&(r.stackIndex===undefined&&(r.stackIndex=0),i=r.stackIndex+1),t.stackIndex=i})}}}(t)),function(t){function e(t,e,i){this.init(t,e,i)}var i,o=t.addEvent,r=t.Axis,a=t.correctFloat,n=t.defaultOptions,s=t.defined,l=t.destroyObjectProperties,h=t.each,c=t.fireEvent,p=t.hasTouch,d=t.isTouchDevice,u=t.merge,g=t.pick,f=t.removeEvent,x=t.svg,m=t.wrap,v={height:d?20:14,barBorderRadius:0,buttonBorderRadius:0,liveRedraw:x&&!d,margin:10,minWidth:6,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:1,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"#333333",trackBackgroundColor:"#f2f2f2",trackBorderColor:"#f2f2f2",trackBorderWidth:1};n.scrollbar=u(!0,v,n.scrollbar),t.swapXY=i=function(t,e){var i,o,r=t.length;if(e)for(i=0;i<r;i+=3)o=t[i+1],t[i+1]=t[i+2],t[i+2]=o;return t},e.prototype={init:function(t,e,i){this.scrollbarButtons=[],this.renderer=t,this.userOptions=e,this.options=u(v,e),this.chart=i,this.size=g(this.options.size,this.options.height),e.enabled&&(this.render(),this.initEvents(),this.addEvents())},render:function(){var t,e=this,o=e.renderer,r=e.options,a=e.size;e.group=t=o.g("scrollbar").attr({zIndex:r.zIndex,translateY:-99999}).add(),e.track=o.rect().addClass("highcharts-scrollbar-track").attr({x:0,r:r.trackBorderRadius||0,height:a,width:a}).add(t),e.track.attr({fill:r.trackBackgroundColor,stroke:r.trackBorderColor,"stroke-width":r.trackBorderWidth}),this.trackBorderWidth=e.track.strokeWidth(),e.track.attr({y:-this.trackBorderWidth%2/2}),e.scrollbarGroup=o.g().add(t),e.scrollbar=o.rect().addClass("highcharts-scrollbar-thumb").attr({height:a,width:a,r:r.barBorderRadius||0}).add(e.scrollbarGroup),e.scrollbarRifles=o.path(i(["M",-3,a/4,"L",-3,2*a/3,"M",0,a/4,"L",0,2*a/3,"M",3,a/4,"L",3,2*a/3],r.vertical)).addClass("highcharts-scrollbar-rifles").add(e.scrollbarGroup),e.scrollbar.attr({fill:r.barBackgroundColor,stroke:r.barBorderColor,"stroke-width":r.barBorderWidth}),e.scrollbarRifles.attr({stroke:r.rifleColor,"stroke-width":1}),e.scrollbarStrokeWidth=e.scrollbar.strokeWidth(),e.scrollbarGroup.translate(-e.scrollbarStrokeWidth%2/2,-e.scrollbarStrokeWidth%2/2),e.drawScrollbarButton(0),e.drawScrollbarButton(1)},position:function(t,e,i,o){var r=this,a=r.options.vertical,n=o,s=0,l=r.rendered?"animate":"attr";r.x=t,r.y=e+this.trackBorderWidth,r.width=i,r.height=o,r.xOffset=n,r.yOffset=s,a?(r.width=r.yOffset=i=s=r.size,r.xOffset=n=0,r.barWidth=o-2*i,r.x=t+=r.options.margin):(r.height=r.xOffset=o=n=r.size,r.barWidth=i-2*o,r.y=r.y+r.options.margin),r.group[l]({translateX:t,translateY:r.y}),r.track[l]({width:i,height:o}),r.scrollbarButtons[1][l]({translateX:a?0:i-n,translateY:a?o-s:0})},drawScrollbarButton:function(t){var e,o,r=this,a=r.renderer,n=r.scrollbarButtons,s=r.options,l=r.size;e=a.g().add(r.group),n.push(e),(o=a.rect().addClass("highcharts-scrollbar-button").add(e)).attr({stroke:s.buttonBorderColor,"stroke-width":s.buttonBorderWidth,fill:s.buttonBackgroundColor}),o.attr(o.crisp({x:-.5,y:-.5,width:l+1,height:l+1,r:s.buttonBorderRadius},o.strokeWidth())),(o=a.path(i(["M",l/2+(t?-1:1),l/2-3,"L",l/2+(t?-1:1),l/2+3,"L",l/2+(t?2:-2),l/2],s.vertical)).addClass("highcharts-scrollbar-arrow").add(n[t])).attr({fill:s.buttonArrowColor})},setRange:function(t,e){var i,o,r,n,l,h=this,c=h.options,p=c.vertical,d=c.minWidth,u=h.barWidth,g=this.rendered&&!this.hasDragged?"animate":"attr";s(u)&&(t=Math.max(t,0),i=Math.ceil(u*t),o=u*Math.min(e,1),h.calculatedWidth=n=a(o-i),n<d&&(i=(u-d+n)*t,n=d),r=Math.floor(i+h.xOffset+h.yOffset),l=n/2-.5,h.from=t,h.to=e,p?(h.scrollbarGroup[g]({translateY:r}),h.scrollbar[g]({height:n}),h.scrollbarRifles[g]({translateY:l}),h.scrollbarTop=r,h.scrollbarLeft=0):(h.scrollbarGroup[g]({translateX:r}),h.scrollbar[g]({width:n}),h.scrollbarRifles[g]({translateX:l}),h.scrollbarLeft=r,h.scrollbarTop=0),n<=12?h.scrollbarRifles.hide():h.scrollbarRifles.show(!0),!1===c.showFull&&(t<=0&&e>=1?h.group.hide():h.group.show()),h.rendered=!0)},initEvents:function(){var t=this;t.mouseMoveHandler=function(e){var i,o=t.chart.pointer.normalize(e),r=t.options.vertical?"chartY":"chartX",a=t.initPositions;!t.grabbedCenter||e.touches&&0===e.touches[0][r]||(i=t.cursorToScrollbarPosition(o)[r]-t[r],t.hasDragged=!0,t.updatePosition(a[0]+i,a[1]+i),t.hasDragged&&c(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e}))},t.mouseUpHandler=function(e){t.hasDragged&&c(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e}),t.grabbedCenter=t.hasDragged=t.chartX=t.chartY=null},t.mouseDownHandler=function(e){var i=t.chart.pointer.normalize(e),o=t.cursorToScrollbarPosition(i);t.chartX=o.chartX,t.chartY=o.chartY,t.initPositions=[t.from,t.to],t.grabbedCenter=!0},t.buttonToMinClick=function(e){var i=a(t.to-t.from)*t.options.step;t.updatePosition(a(t.from-i),a(t.to-i)),c(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})},t.buttonToMaxClick=function(e){var i=(t.to-t.from)*t.options.step;t.updatePosition(t.from+i,t.to+i),c(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})},t.trackClick=function(e){var i=t.chart.pointer.normalize(e),o=t.to-t.from,r=t.y+t.scrollbarTop,a=t.x+t.scrollbarLeft;t.options.vertical&&i.chartY>r||!t.options.vertical&&i.chartX>a?t.updatePosition(t.from+o,t.to+o):t.updatePosition(t.from-o,t.to-o),c(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})}},cursorToScrollbarPosition:function(t){var e=this,i=e.options,o=i.minWidth>e.calculatedWidth?i.minWidth:0;return{chartX:(t.chartX-e.x-e.xOffset)/(e.barWidth-o),chartY:(t.chartY-e.y-e.yOffset)/(e.barWidth-o)}},updatePosition:function(t,e){e>1&&(t=a(1-a(e-t)),e=1),t<0&&(e=a(e-t),t=0),this.from=t,this.to=e},update:function(t){this.destroy(),this.init(this.chart.renderer,u(!0,this.options,t),this.chart)},addEvents:function(){var t,e=this.options.inverted?[1,0]:[0,1],i=this.scrollbarButtons,r=this.scrollbarGroup.element,a=this.track.element,n=this.mouseDownHandler,s=this.mouseMoveHandler,l=this.mouseUpHandler;t=[[i[e[0]].element,"click",this.buttonToMinClick],[i[e[1]].element,"click",this.buttonToMaxClick],[a,"click",this.trackClick],[r,"mousedown",n],[r.ownerDocument,"mousemove",s],[r.ownerDocument,"mouseup",l]],p&&t.push([r,"touchstart",n],[r.ownerDocument,"touchmove",s],[r.ownerDocument,"touchend",l]),h(t,function(t){o.apply(null,t)}),this._events=t},removeEvents:function(){h(this._events,function(t){f.apply(null,t)}),this._events.length=0},destroy:function(){var t=this.chart.scroller;this.removeEvents(),h(["track","scrollbarRifles","scrollbar","scrollbarGroup","group"],function(t){this[t]&&this[t].destroy&&(this[t]=this[t].destroy())},this),t&&this===t.scrollbar&&(t.scrollbar=null,l(t.scrollbarButtons))}},m(r.prototype,"init",function(t){var i=this;t.apply(i,Array.prototype.slice.call(arguments,1)),i.options.scrollbar&&i.options.scrollbar.enabled&&(i.options.scrollbar.vertical=!i.horiz,i.options.startOnTick=i.options.endOnTick=!1,i.scrollbar=new e(i.chart.renderer,i.options.scrollbar,i.chart),o(i.scrollbar,"changed",function(t){var e,o,r=Math.min(g(i.options.min,i.min),i.min,i.dataMin),a=Math.max(g(i.options.max,i.max),i.max,i.dataMax)-r;i.horiz&&!i.reversed||!i.horiz&&i.reversed?(e=r+a*this.to,o=r+a*this.from):(e=r+a*(1-this.from),o=r+a*(1-this.to)),i.setExtremes(o,e,!0,!1,t)}))}),m(r.prototype,"render",function(t){var e,i,o,r=this,a=Math.min(g(r.options.min,r.min),r.min,g(r.dataMin,r.min)),n=Math.max(g(r.options.max,r.max),r.max,g(r.dataMax,r.max)),l=r.scrollbar,h=r.titleOffset||0;t.apply(r,Array.prototype.slice.call(arguments,1)),l&&(r.horiz?(l.position(r.left,r.top+r.height+2+r.chart.scrollbarsOffsets[1]+(r.opposite?0:h+r.axisTitleMargin+r.offset),r.width,r.height),e=1):(l.position(r.left+r.width+2+r.chart.scrollbarsOffsets[0]+(r.opposite?h+r.axisTitleMargin+r.offset:0),r.top,r.width,r.height),e=0),(!r.opposite&&!r.horiz||r.opposite&&r.horiz)&&(r.chart.scrollbarsOffsets[e]+=r.scrollbar.size+r.scrollbar.options.margin),isNaN(a)||isNaN(n)||!s(r.min)||!s(r.max)?l.setRange(0,0):(i=(r.min-a)/(n-a),o=(r.max-a)/(n-a),r.horiz&&!r.reversed||!r.horiz&&r.reversed?l.setRange(i,o):l.setRange(1-o,1-i)))}),m(r.prototype,"getOffset",function(t){var e=this,i=e.horiz?2:1,o=e.scrollbar;t.apply(e,Array.prototype.slice.call(arguments,1)),o&&(e.chart.scrollbarsOffsets=[0,0],e.chart.axisOffset[i]+=o.size+o.options.margin)}),m(r.prototype,"destroy",function(t){this.scrollbar&&(this.scrollbar=this.scrollbar.destroy()),t.apply(this,Array.prototype.slice.call(arguments,1))}),t.Scrollbar=e}(t),function(t){function e(t){this.init(t)}var i,o=t.addEvent,r=t.Axis,a=t.Chart,n=t.color,s=t.defaultDataGroupingUnits,l=t.defaultOptions,h=t.defined,c=t.destroyObjectProperties,p=t.each,d=t.erase,u=t.error,g=t.extend,f=t.grep,x=t.hasTouch,m=t.isArray,v=t.isNumber,b=t.isObject,y=t.merge,M=t.pick,k=t.removeEvent,A=t.Scrollbar,w=t.Series,S=t.seriesTypes,B=t.wrap,P=[].concat(s),D=function(t){var e=f(arguments,v);if(e.length)return Math[t].apply(0,e)};P[4]=["day",[1,2,3,4]],P[5]=["week",[1,2,3]],i=S.areaspline===undefined?"line":"areaspline",g(l,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:n("#6685c2").setOpacity(.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:i,fillOpacity:.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:P},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},pointRange:0,threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,
gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),t.Renderer.prototype.symbols["navigator-handle"]=function(t,e,i,o,r){var a=r.width/2,n=Math.round(a/3)+.5,s=r.height;return["M",-a-1,.5,"L",a,.5,"L",a,s+.5,"L",-a-1,s+.5,"L",-a-1,.5,"M",-n,4,"L",-n,s-3,"M",n-1,4,"L",n-1,s-3]},e.prototype={drawHandle:function(t,e,i,o){var r=this,a=r.navigatorOptions.handles.height;r.handles[e][o](i?{translateX:Math.round(r.left+r.height/2),translateY:Math.round(r.top+parseInt(t,10)+.5-a)}:{translateX:Math.round(r.left+parseInt(t,10)),translateY:Math.round(r.top+r.height/2-a/2-1)})},drawOutline:function(t,e,i,o){var r,a,n=this,s=n.navigatorOptions.maskInside,l=n.outline.strokeWidth(),h=l/2,c=l%2/2,p=n.outlineHeight,d=n.scrollbarHeight,u=n.size,g=n.left-d,f=n.top;a=i?["M",(g-=h)+p,f-d-c,"L",g+p,r=f+e+c,"L",g,r,"L",g,e=f+t+c,"L",g+p,e,"L",g+p,f+u+d].concat(s?["M",g+p,r-h,"L",g+p,e+h]:[]):["M",g,f+=h,"L",t+=g+d-c,f,"L",t,f+p,"L",e+=g+d-c,f+p,"L",e,f,"L",g+u+2*d,f].concat(s?["M",t-h,f,"L",e+h,f]:[]),n.outline[o]({d:a})},drawMasks:function(t,e,i,o){var r,a,n,s,l=this,h=l.left,c=l.top,d=l.height;i?(n=[h,h,h],s=[c,c+t,c+e],a=[d,d,d],r=[t,e-t,l.size-e]):(n=[h,h+t,h+e],s=[c,c,c],a=[t,e-t,l.size-e],r=[d,d,d]),p(l.shades,function(t,e){t[o]({x:n[e],y:s[e],width:a[e],height:r[e]})})},renderElements:function(){var t,e=this,i=e.navigatorOptions,o=i.maskInside,r=e.chart,a=r.inverted,n=r.renderer;e.navigatorGroup=t=n.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();var s={cursor:a?"ns-resize":"ew-resize"};p([!o,o,!o],function(o,r){e.shades[r]=n.rect().addClass("highcharts-navigator-mask"+(1===r?"-inside":"-outside")).attr({fill:o?i.maskFill:"rgba(0,0,0,0)"}).css(1===r&&s).add(t)}),e.outline=n.path().addClass("highcharts-navigator-outline").attr({"stroke-width":i.outlineWidth,stroke:i.outlineColor}).add(t),i.handles.enabled&&p([0,1],function(o){i.handles.inverted=r.inverted,e.handles[o]=n.symbol(i.handles.symbols[o],-i.handles.width/2-1,0,i.handles.width,i.handles.height,i.handles),e.handles[o].attr({zIndex:7-o}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][o]).add(t);var a=i.handles;e.handles[o].attr({fill:a.backgroundColor,stroke:a.borderColor,"stroke-width":a.lineWidth}).css(s)})},update:function(t){p(this.series||[],function(t){t.baseSeries&&delete t.baseSeries.navigatorSeries}),this.destroy();var e=this.chart.options;y(!0,e.navigator,this.options,t),this.init(this.chart)},render:function(e,i,o,r){var a,n,s,l,c,p,d,u,g,f,x=this,m=x.chart,b=x.scrollbarHeight,y=x.xAxis,k=y.fake?m.xAxis[0]:y,A=x.navigatorEnabled,w=x.rendered,S=m.inverted,B=m.xAxis[0].minRange,P=m.xAxis[0].options.maxRange;if(!this.hasDragged||h(o)){if(!v(e)||!v(i)){if(!w)return;o=0,r=M(y.width,k.width)}x.left=M(y.left,m.plotLeft+b+(S?m.plotWidth:0)),x.size=p=l=M(y.len,(S?m.plotHeight:m.plotWidth)-2*b),a=S?b:l+2*b,o=M(o,y.toPixels(e,!0)),r=M(r,y.toPixels(i,!0)),v(o)&&Math.abs(o)!==Infinity||(o=0,r=a),u=y.toValue(o,!0),g=y.toValue(r,!0),(f=Math.abs(t.correctFloat(g-u)))<B?this.grabbedLeft?o=y.toPixels(g-B,!0):this.grabbedRight&&(r=y.toPixels(u+B,!0)):h(P)&&f>P&&(this.grabbedLeft?o=y.toPixels(g-P,!0):this.grabbedRight&&(r=y.toPixels(u+P,!0))),x.zoomedMax=Math.min(Math.max(o,r,0),p),x.zoomedMin=Math.min(Math.max(x.fixedWidth?x.zoomedMax-x.fixedWidth:Math.min(o,r),0),p),x.range=x.zoomedMax-x.zoomedMin,p=Math.round(x.zoomedMax),c=Math.round(x.zoomedMin),A&&(x.navigatorGroup.attr({visibility:"visible"}),d=w&&!x.hasDragged?"animate":"attr",x.drawMasks(c,p,S,d),x.drawOutline(c,p,S,d),x.navigatorOptions.handles.enabled&&(x.drawHandle(c,0,S,d),x.drawHandle(p,1,S,d))),x.scrollbar&&(S?(s=x.top-b,n=x.left-b+(A||!k.opposite?0:(k.titleOffset||0)+k.axisTitleMargin),b=l+2*b):(s=x.top+(A?x.height:-b),n=x.left-b),x.scrollbar.position(n,s,a,b),x.scrollbar.setRange(x.zoomedMin/l,x.zoomedMax/l)),x.rendered=!0}},addMouseEvents:function(){var t,e,i=this,r=i.chart,a=r.container,n=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},(n=i.getPartsEvents("mousedown")).push(o(a,"mousemove",t),o(a.ownerDocument,"mouseup",e)),x&&(n.push(o(a,"touchmove",t),o(a.ownerDocument,"touchend",e)),n.concat(i.getPartsEvents("touchstart"))),i.eventsToUnbind=n,i.series&&i.series[0]&&n.push(o(i.series[0].xAxis,"foundExtremes",function(){r.navigator.modifyNavigatorAxisExtremes()}))},getPartsEvents:function(t){var e=this,i=[];return p(["shades","handles"],function(r){p(e[r],function(a,n){i.push(o(a.element,t,function(t){e[r+"Mousedown"](t,n)}))})}),i},shadesMousedown:function(t,e){t=this.chart.pointer.normalize(t);var i,o,r,a=this,n=a.chart,s=a.xAxis,l=a.zoomedMin,h=a.left,c=a.size,p=a.range,d=t.chartX;n.inverted&&(d=t.chartY,h=a.top),1===e?(a.grabbedCenter=d,a.fixedWidth=p,a.dragOffset=d-l):(r=d-h-p/2,0===e?r=Math.max(0,r):2===e&&r+p>=c&&(r=c-p,i=a.getUnionExtremes().dataMax),r!==l&&(a.fixedWidth=p,o=s.toFixedRange(r,r+p,null,i),n.xAxis[0].setExtremes(Math.min(o.min,o.max),Math.max(o.min,o.max),!0,null,{trigger:"navigator"})))},handlesMousedown:function(t,e){t=this.chart.pointer.normalize(t);var i=this,o=i.chart,r=o.xAxis[0],a=o.inverted&&!r.reversed||!o.inverted&&r.reversed;0===e?(i.grabbedLeft=!0,i.otherHandlePos=i.zoomedMax,i.fixedExtreme=a?r.min:r.max):(i.grabbedRight=!0,i.otherHandlePos=i.zoomedMin,i.fixedExtreme=a?r.max:r.min),o.fixedRange=null},onMouseMove:function(t){var e,i=this,o=i.chart,r=i.left,a=i.navigatorSize,n=i.range,s=i.dragOffset,l=o.inverted;t.touches&&0===t.touches[0].pageX||(e=(t=o.pointer.normalize(t)).chartX,l&&(r=i.top,e=t.chartY),i.grabbedLeft?(i.hasDragged=!0,i.render(0,0,e-r,i.otherHandlePos)):i.grabbedRight?(i.hasDragged=!0,i.render(0,0,i.otherHandlePos,e-r)):i.grabbedCenter&&(i.hasDragged=!0,e<s?e=s:e>a+s-n&&(e=a+s-n),i.render(0,0,e-s,e-s+n)),i.hasDragged&&i.scrollbar&&i.scrollbar.options.liveRedraw&&(t.DOMType=t.type,setTimeout(function(){i.onMouseUp(t)},0)))},onMouseUp:function(t){var e,i,o,r=this,a=r.chart,n=r.xAxis,s=r.scrollbar,l=t.DOMEvent||t;(!r.hasDragged||s&&s.hasDragged)&&"scrollbar"!==t.trigger||(r.zoomedMin===r.otherHandlePos?e=r.fixedExtreme:r.zoomedMax===r.otherHandlePos&&(i=r.fixedExtreme),r.zoomedMax===r.size&&(i=r.getUnionExtremes().dataMax),o=n.toFixedRange(r.zoomedMin,r.zoomedMax,e,i),h(o.min)&&a.xAxis[0].setExtremes(Math.min(o.min,o.max),Math.max(o.min,o.max),!0,!r.hasDragged&&null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:l})),"mousemove"!==t.DOMType&&(r.grabbedLeft=r.grabbedRight=r.grabbedCenter=r.fixedWidth=r.fixedExtreme=r.otherHandlePos=r.hasDragged=r.dragOffset=null)},removeEvents:function(){this.eventsToUnbind&&(p(this.eventsToUnbind,function(t){t()}),this.eventsToUnbind=undefined),this.removeBaseSeriesEvents()},removeBaseSeriesEvents:function(){var t=this.baseSeries||[];this.navigatorEnabled&&t[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&p(t,function(t){k(t,"updatedData",this.updatedDataHandler)},this),t[0].xAxis&&k(t[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))},init:function(t){var e=t.options,i=e.navigator,a=i.enabled,n=e.scrollbar,s=n.enabled,l=a?i.height:0,h=s?n.height:0;this.handles=[],this.shades=[],this.chart=t,this.setBaseSeries(),this.height=l,this.scrollbarHeight=h,this.scrollbarEnabled=s,this.navigatorEnabled=a,this.navigatorOptions=i,this.scrollbarOptions=n,this.outlineHeight=l+h,this.opposite=M(i.opposite,!a&&t.inverted);var c=this,p=c.baseSeries,d=t.xAxis.length,u=t.yAxis.length,g=p&&p[0]&&p[0].xAxis||t.xAxis[0];t.extraMargin={type:c.opposite?"plotTop":"marginBottom",value:(a||!t.inverted?c.outlineHeight:0)+i.margin},t.inverted&&(t.extraMargin.type=c.opposite?"marginRight":"plotLeft"),t.isDirtyBox=!0,c.navigatorEnabled?(c.xAxis=new r(t,y({breaks:g.options.breaks,ordinal:g.options.ordinal},i.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:d,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},t.inverted?{offsets:[h,0,-h,0],width:l}:{offsets:[0,-h,0,h],height:l})),c.yAxis=new r(t,y(i.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:u,zoomEnabled:!1},t.inverted?{width:l}:{height:l})),p||i.series.data?c.updateNavigatorSeries():0===t.series.length&&B(t,"redraw",function(e,i){t.series.length>0&&!c.series&&(c.setBaseSeries(),t.redraw=e),e.call(t,i)}),c.renderElements(),c.addMouseEvents()):c.xAxis={translate:function(e,i){var o=t.xAxis[0],r=o.getExtremes(),a=o.len-2*h,n=D("min",o.options.min,r.dataMin),s=D("max",o.options.max,r.dataMax)-n;return i?e*s/a+n:a*(e-n)/s},toPixels:function(t){return this.translate(t)},toValue:function(t){return this.translate(t,!0)},toFixedRange:r.prototype.toFixedRange,fake:!0},t.options.scrollbar.enabled&&(t.scrollbar=c.scrollbar=new A(t.renderer,y(t.options.scrollbar,{margin:c.navigatorEnabled?0:10,vertical:t.inverted}),t),o(c.scrollbar,"changed",function(e){var i=c.size,o=i*this.to,r=i*this.from;c.hasDragged=c.scrollbar.hasDragged,c.render(0,0,r,o),(t.options.scrollbar.liveRedraw||"mousemove"!==e.DOMType)&&setTimeout(function(){c.onMouseUp(e)})})),c.addBaseSeriesEvents(),c.addChartEvents()},getUnionExtremes:function(t){var e,i=this.chart.xAxis[0],o=this.xAxis,r=o.options,a=i.options;return t&&null===i.dataMin||(e={dataMin:M(r&&r.min,D("min",a.min,i.dataMin,o.dataMin,o.min)),dataMax:M(r&&r.max,D("max",a.max,i.dataMax,o.dataMax,o.max))}),e},setBaseSeries:function(t,e){var i=this.chart,o=this.baseSeries=[];t=t||i.options&&i.options.navigator.baseSeries||0,p(i.series||[],function(e,i){e.options.isInternal||!e.options.showInNavigator&&(i!==t&&e.options.id!==t||!1===e.options.showInNavigator)||o.push(e)}),this.xAxis&&!this.xAxis.fake&&this.updateNavigatorSeries(e)},updateNavigatorSeries:function(e){var i,o,r,a=this,n=a.chart,s=a.baseSeries,h=a.navigatorOptions.series,c={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:!1,isInternal:!0,visible:!0},d=a.series=t.grep(a.series||[],function(e){var i=e.baseSeries;return!(t.inArray(i,s)<0)||(i&&(k(i,"updatedData",a.updatedDataHandler),delete i.navigatorSeries),e.destroy(),!1)});s&&s.length&&p(s,function(t){var p=t.navigatorSeries,u=g({color:t.color},m(h)?l.navigator.series:h);if(!p||!1!==a.navigatorOptions.adaptToUpdatedData){c.name="Navigator "+s.length,i=t.options||{},r=i.navigatorOptions||{},o=y(i,c,u,r);var f=r.data||u.data;a.hasNavigatorData=a.hasNavigatorData||!!f,o.data=f||i.data&&i.data.slice(0),p&&p.options?p.update(o,e):(t.navigatorSeries=n.initSeries(o),t.navigatorSeries.baseSeries=t,d.push(t.navigatorSeries))}}),(!h.data||s&&s.length)&&!m(h)||(a.hasNavigatorData=!1,h=t.splat(h),p(h,function(t,e){c.name="Navigator "+(d.length+1),(o=y(l.navigator.series,{color:n.series[e]&&!n.series[e].options.isInternal&&n.series[e].color||n.options.colors[e]||n.options.colors[0]},c,t)).data=t.data,o.data&&(a.hasNavigatorData=!0,d.push(n.initSeries(o)))})),this.addBaseSeriesEvents()},addBaseSeriesEvents:function(){var t=this,e=t.baseSeries||[];e[0]&&e[0].xAxis&&o(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes),p(e,function(e){o(e,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)}),o(e,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)}),!1!==this.navigatorOptions.adaptToUpdatedData&&e.xAxis&&o(e,"updatedData",this.updatedDataHandler),o(e,"remove",function(){this.navigatorSeries&&(d(t.series,this.navigatorSeries),this.navigatorSeries.remove(!1),delete this.navigatorSeries)})},this)},modifyNavigatorAxisExtremes:function(){var t,e=this.xAxis;e.getExtremes&&(!(t=this.getUnionExtremes(!0))||t.dataMin===e.min&&t.dataMax===e.max||(e.min=t.dataMin,e.max=t.dataMax))},modifyBaseAxisExtremes:function(){var t,e,i=this,o=i.chart.navigator,r=i.getExtremes(),a=r.min,n=r.max,s=r.dataMin,l=r.dataMax,h=n-a,c=o.stickToMin,p=o.stickToMax,d=i.options.overscroll,u=o.series&&o.series[0],g=!!i.setExtremes;i.eventArgs&&"rangeSelectorButton"===i.eventArgs.trigger||(c&&(t=(e=s)+h),p&&(t=l+d,c||(e=Math.max(t-h,u&&u.xData?u.xData[0]:-Number.MAX_VALUE))),g&&(c||p)&&v(e)&&(i.min=i.userMin=e,i.max=i.userMax=t)),o.stickToMin=o.stickToMax=null},updatedDataHandler:function(){var t=this.chart.navigator,e=this,i=this.navigatorSeries;t.stickToMax=Math.round(t.zoomedMax)>=Math.round(t.size),t.stickToMin=v(e.xAxis.min)&&e.xAxis.min<=e.xData[0]&&(!this.chart.fixedRange||!t.stickToMax),i&&!t.hasNavigatorData&&(i.options.pointStart=e.xData[0],i.setData(e.options.data,!1,null,!1))},addChartEvents:function(){o(this.chart,"redraw",function(){var t=this.navigator,e=t&&(t.baseSeries&&t.baseSeries[0]&&t.baseSeries[0].xAxis||t.scrollbar&&this.xAxis[0]);e&&t.render(e.min,e.max)})},destroy:function(){this.removeEvents(),this.xAxis&&(d(this.chart.xAxis,this.xAxis),d(this.chart.axes,this.xAxis)),this.yAxis&&(d(this.chart.yAxis,this.yAxis),d(this.chart.axes,this.yAxis)),p(this.series||[],function(t){t.destroy&&t.destroy()}),p(["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"],function(t){this[t]&&this[t].destroy&&this[t].destroy(),this[t]=null},this),p([this.handles],function(t){c(t)},this)}},t.Navigator=e,B(r.prototype,"zoom",function(t,e,i){var o,r,a=this.chart,n=a.options,s=n.chart.zoomType,l=n.navigator,c=n.rangeSelector;return this.isXAxis&&(l&&l.enabled||c&&c.enabled)&&("x"===s?a.resetZoomButton="blocked":"y"===s?r=!1:"xy"===s&&this.options.range&&(o=this.previousZoom,h(e)?this.previousZoom=[this.min,this.max]:o&&(e=o[0],i=o[1],delete this.previousZoom))),r!==undefined?r:t.call(this,e,i)}),B(a.prototype,"init",function(t,i,r){o(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=this.navigator=new e(this))}),t.call(this,i,r)}),B(a.prototype,"setChartSize",function(t){var e,i,o,r,a=this.legend,n=this.navigator;t.apply(this,[].slice.call(arguments,1)),n&&(i=a&&a.options,o=n.xAxis,r=n.yAxis,e=n.scrollbarHeight,this.inverted?(n.left=n.opposite?this.chartWidth-e-n.height:this.spacing[3]+e,n.top=this.plotTop+e):(n.left=this.plotLeft+e,n.top=n.navigatorOptions.top||this.chartHeight-n.height-e-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(i&&"bottom"===i.verticalAlign&&i.enabled&&!i.floating?a.legendHeight+M(i.margin,10):0)),o&&r&&(this.inverted?o.options.left=r.options.left=n.left:o.options.top=r.options.top=n.top,o.setAxisSize(),r.setAxisSize()))}),B(w.prototype,"addPoint",function(t,e,i,o,r){var a=this.options.turboThreshold;a&&this.xData.length>a&&b(e,!0)&&this.chart.navigator&&u(20,!0),t.call(this,e,i,o,r)}),B(a.prototype,"addSeries",function(t,e,i,o){var r=t.call(this,e,!1,o);return this.navigator&&this.navigator.setBaseSeries(null,!1),M(i,!0)&&this.redraw(),r}),B(w.prototype,"update",function(t,e,i){t.call(this,e,!1),this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1),M(i,!0)&&this.chart.redraw()}),a.prototype.callbacks.push(function(t){var e,i=t.navigator;i&&(e=t.xAxis[0].getExtremes(),i.render(e.min,e.max))})}(t),function(t){function e(t){this.init(t)}var i=t.addEvent,o=t.Axis,r=t.Chart,a=t.css,n=t.createElement,s=t.dateFormat,l=t.defaultOptions,h=l.global.useUTC,c=t.defined,p=t.destroyObjectProperties,d=t.discardElement,u=t.each,g=t.extend,f=t.fireEvent,x=t.Date,m=t.isNumber,v=t.merge,b=t.pick,y=t.pInt,M=t.splat,k=t.wrap;g(l,{rangeSelector:{verticalAlign:"top",buttonTheme:{"stroke-width":0,width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:undefined,inputPosition:{align:"right",x:0,y:0},buttonPosition:{align:"left",x:0,y:0},labelStyle:{color:"#666666"}}}),l.lang=v(l.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),e.prototype={clickButton:function(t,e){var r,a,n,s,l,c,p,d=this,g=d.chart,f=d.buttonOptions[t],x=g.xAxis[0],v=g.scroller&&g.scroller.getUnionExtremes()||x||{},y=v.dataMin,k=v.dataMax,A=x&&Math.round(Math.min(x.max,b(k,x.max))),w=f.type,S=f._range,B=f.dataGrouping;if(null!==y&&null!==k){if(g.fixedRange=S,B&&(this.forcedDataGrouping=!0,o.prototype.setDataGrouping.call(x||{chart:this.chart},B,!1)),"month"===w||"year"===w)x?(c={range:f,max:A,dataMin:y,dataMax:k},r=x.minFromRange.call(c),m(c.newMax)&&(A=c.newMax)):S=f;else if(S)r=Math.max(A-S,y),A=Math.min(r+S,k);else if("ytd"===w){if(!x)return void i(g,"beforeRender",function(){d.clickButton(t)});k===undefined&&(y=Number.MAX_VALUE,k=Number.MIN_VALUE,u(g.series,function(t){var e=t.xData;y=Math.min(e[0],y),k=Math.max(e[e.length-1],k)}),e=!1),r=n=(p=d.getYTDExtremes(k,y,h)).min,A=p.max}else"all"===w&&x&&(r=y,A=k);r+=f._offsetMin,A+=f._offsetMax,d.setSelected(t),x?x.setExtremes(r,A,b(e,1),null,{trigger:"rangeSelectorButton",rangeSelectorButton:f}):(a=M(g.options.xAxis)[0],l=a.range,a.range=S,s=a.min,a.min=n,i(g,"load",function(){a.range=l,a.min=s}))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,o=t.options.rangeSelector,r=o.buttons||[].concat(e.defaultButtons),a=o.selected,n=function(){var t=e.minInput,i=e.maxInput;t&&t.blur&&f(t,"blur"),i&&i.blur&&f(i,"blur")};e.chart=t,e.options=o,e.buttons=[],t.extraTopMargin=o.height,e.buttonOptions=r,this.unMouseDown=i(t.container,"mousedown",n),this.unResize=i(t,"resize",n),u(r,e.computeButtonRange),a!==undefined&&r[a]&&this.clickButton(a,!1),i(t,"load",function(){t.xAxis&&t.xAxis[0]&&i(t.xAxis[0],"setExtremes",function(i){this.max-this.min!==t.fixedRange&&"rangeSelectorButton"!==i.trigger&&"updatedData"!==i.trigger&&e.forcedDataGrouping&&this.setDataGrouping(!1,!1)})})},updateButtonStates:function(){var t=this,e=this.chart,i=e.xAxis[0],o=Math.round(i.max-i.min),r=!i.hasVisibleSeries,a=864e5,n=e.scroller&&e.scroller.getUnionExtremes()||i,s=n.dataMin,l=n.dataMax,c=t.getYTDExtremes(l,s,h),p=c.min,d=c.max,g=t.selected,f=m(g),x=t.options.allButtonsEnabled,v=t.buttons;u(t.buttonOptions,function(t,e){var n=t._range,h=t.type,c=t.count||1,u=v[e],m=0,b=t._offsetMax-t._offsetMin,y=e===g,M=n>l-s,k=n<i.minRange,A=!1,w=!1,S=n===o;("month"===h||"year"===h)&&o>={month:28,year:365}[h]*a*c+b&&o<={month:31,year:366}[h]*a*c+b?S=!0:"ytd"===h?(S=d-p+b===o,A=!y):"all"===h&&(S=i.max-i.min>=l-s,w=!y&&f&&S),!x&&(M||k||w||r)?m=3:(y&&S||S&&!f&&!A)&&(f=!0,m=2),u.state!==m&&u.setState(m)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,o={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};o[e]?t._range=o[e]*i:"month"!==e&&"year"!==e||(t._range=24*{month:30,year:365}[e]*36e5*i),t._offsetMin=b(t.offsetMin,0),t._offsetMax=b(t.offsetMax,0),t._range+=t._offsetMax-t._offsetMin},setInputValue:function(t,e){var i=this.chart.options.rangeSelector,o=this[t+"Input"];c(e)&&(o.previousValue=o.HCTime,o.HCTime=e),o.value=s(i.inputEditDateFormat||"%Y-%m-%d",o.HCTime),this[t+"DateBox"].attr({text:s(i.inputDateFormat||"%b %e, %Y",o.HCTime)})},showInput:function(t){var e=this.inputGroup,i=this[t+"DateBox"];a(this[t+"Input"],{left:e.translateX+i.x+"px",top:e.translateY+"px",width:i.width-2+"px",height:i.height-2+"px",border:"2px solid silver"})},hideInput:function(t){a(this[t+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(t)},drawInput:function(t){function e(){var t=i.value,e=(u.inputDateParser||Date.parse)(t),o=c.xAxis[0],r=c.scroller&&c.scroller.xAxis?c.scroller.xAxis:o,a=r.dataMin,n=r.dataMax;e!==i.previousValue&&(i.previousValue=e,m(e)||(e=t.split("-"),e=Date.UTC(y(e[0]),y(e[1])-1,y(e[2]))),m(e)&&(h||(e+=60*(new Date).getTimezoneOffset()*1e3),b?e>s.maxInput.HCTime?e=undefined:e<a&&(e=a):e<s.minInput.HCTime?e=undefined:e>n&&(e=n),e!==undefined&&o.setExtremes(b?e:o.min,b?o.max:e,undefined,undefined,{trigger:"rangeSelectorInput"})))}var i,o,r,s=this,c=s.chart,p=c.renderer.style||{},d=c.renderer,u=c.options.rangeSelector,f=l.lang,x=s.div,b="min"===t,M=this.inputGroup;this[t+"Label"]=o=d.label(f[b?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).addClass("highcharts-range-label").attr({padding:2}).add(M),M.offset+=o.width+5,this[t+"DateBox"]=r=d.label("",M.offset).addClass("highcharts-range-input").attr({padding:2,width:u.inputBoxWidth||90,height:u.inputBoxHeight||17,stroke:u.inputBoxBorderColor||"#cccccc","stroke-width":1,"text-align":"center"}).on("click",function(){s.showInput(t),s[t+"Input"].focus()}).add(M),M.offset+=r.width+(b?10:0),this[t+"Input"]=i=n("input",{name:t,className:"highcharts-range-selector",type:"text"},{top:c.plotTop+"px"},x),o.css(v(p,u.labelStyle)),r.css(v({color:"#333333"},p,u.inputStyle)),a(i,g({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:p.fontSize,fontFamily:p.fontFamily,top:"-9999em"},u.inputStyle)),i.onfocus=function(){s.showInput(t)},i.onblur=function(){s.hideInput(t)},i.onchange=e,i.onkeypress=function(t){13===t.keyCode&&e()}},getPosition:function(){var t=this.chart,e=t.options.rangeSelector,i="top"===e.verticalAlign?t.plotTop-t.axisOffset[0]:0;return{buttonTop:i+e.buttonPosition.y,inputTop:i+e.inputPosition.y-10}},getYTDExtremes:function(t,e,i){var o,r=new x(t),a=r[x.hcGetFullYear](),n=i?x.UTC(a,0,1):+new x(a,0,1);return o=Math.max(e||0,n),r=r.getTime(),{max:Math.min(t||r,r),min:o}},render:function(t,e){var i,o,r,a,s,h,c=this,p=c.chart,d=p.renderer,g=p.container,f=p.options,x=f.exporting&&!1!==f.exporting.enabled&&f.navigation&&f.navigation.buttonOptions,m=l.lang,v=c.div,y=f.rangeSelector,M=y.floating,k=c.buttons,A=c.inputGroup,w=y.buttonTheme,S=y.buttonPosition,B=y.inputPosition,P=y.inputEnabled,D=w&&w.states,T=p.plotLeft,C=c.buttonGroup,E=c.rendered,O=c.options.verticalAlign,L=p.legend,z=L&&L.options,I=S.y,R=B.y,W=E||!1,X=0,G=0;if(!1!==y.enabled){var H,Y,N,F;if(E||(c.group=o=d.g("range-selector-group").attr({zIndex:7}).add(),c.buttonGroup=C=d.g("range-selector-buttons").add(o),c.zoomText=d.text(m.rangeSelectorZoom,b(T+S.x,T),15).css(y.labelStyle).add(C),i=b(T+S.x,T)+c.zoomText.getBBox().width+5,u(c.buttonOptions,function(t,e){k[e]=d.button(t.text,i,0,function(){var i,o=t.events&&t.events.click;o&&(i=o.call(t)),!1!==i&&c.clickButton(e),c.isActive=!0},w,D&&D.hover,D&&D.select,D&&D.disabled).attr({"text-align":"center"}).add(C),i+=k[e].width+b(y.buttonSpacing,5)}),!1!==P&&(c.div=v=n("div",null,{position:"relative",height:0,zIndex:1}),g.parentNode.insertBefore(v,g),c.inputGroup=A=d.g("input-group").add(o),A.offset=0,c.drawInput("min"),c.drawInput("max"))),T=p.plotLeft-p.spacing[3],c.updateButtonStates(),x&&this.titleCollision(p)&&"top"===O&&"right"===S.align&&S.y+C.getBBox().height-12<(x.y||0)+x.height&&(X=-40),"left"===S.align?h=S.x-p.spacing[3]:"right"===S.align&&(h=S.x+X-p.spacing[1]),C.align({y:S.y,width:C.getBBox().width,align:S.align,x:h},!0,p.spacingBox),c.group.placed=W,c.buttonGroup.placed=W,!1!==P)X=x&&this.titleCollision(p)&&"top"===O&&"right"===B.align&&B.y-A.getBBox().height-12<(x.y||0)+x.height+p.spacing[0]?-40:0,"left"===B.align?h=T:"right"===B.align&&(h=-Math.max(p.axisOffset[1],-X)),A.align({y:B.y,width:A.getBBox().width,align:B.align,x:B.x+h-2},!0,p.spacingBox),H=A.alignAttr.translateX+A.alignOptions.x-X+A.getBBox().x+2,Y=A.alignOptions.width,N=C.alignAttr.translateX+C.getBBox().x,F=C.getBBox().width+20,(B.align===S.align||N+F>H&&H+Y>N&&I<R+A.getBBox().height)&&A.attr({translateX:A.alignAttr.translateX+(p.axisOffset[1]>=-X?0:-X),translateY:A.alignAttr.translateY+C.getBBox().height+10}),c.setInputValue("min",t),c.setInputValue("max",e),c.inputGroup.placed=W;c.group.align({verticalAlign:O},!0,p.spacingBox),r=c.group.getBBox().height+20,a=c.group.alignAttr.translateY,"bottom"===O&&(G=a-(r=r+(z&&"bottom"===z.verticalAlign&&z.enabled&&!z.floating?L.legendHeight+b(z.margin,10):0)-20)-(M?0:y.y)-10),"top"===O?(M&&(G=0),p.titleOffset&&(G=p.titleOffset+p.options.title.margin),G+=p.margin[0]-p.spacing[0]||0):"middle"===O&&(R===I?G=R<0?a+s:a:(R||I)&&(R<0||I<0?G-=Math.min(R,I):G=a-r+s)),c.group.translate(y.x,y.y+Math.floor(G)),!1!==P&&(c.minInput.style.marginTop=c.group.translateY+"px",c.maxInput.style.marginTop=c.group.translateY+"px"),c.rendered=!0}},getHeight:function(){var t,e=this,i=e.options,o=e.group,r=i.inputPosition,a=i.buttonPosition,n=i.y,s=a.y,l=r.y,h=0;return h=o?o.getBBox(!0).height+13+n:0,t=Math.min(l,s),(l<0&&s<0||l>0&&s>0)&&(h+=Math.abs(t)),h},titleCollision:function(t){return!(t.options.title.text||t.options.subtitle.text)},update:function(t){var e=this.chart;v(!0,e.options.rangeSelector,t),this.destroy(),this.init(e),e.rangeSelector.render()},destroy:function(){var i=this,o=i.minInput,r=i.maxInput;i.unMouseDown(),i.unResize(),p(i.buttons),o&&(o.onfocus=o.onblur=o.onchange=null),r&&(r.onfocus=r.onblur=r.onchange=null),t.objectEach(i,function(t,o){t&&"chart"!==o&&(t.destroy?t.destroy():t.nodeType&&d(this[o])),t!==e.prototype[o]&&(i[o]=null)},this)}},o.prototype.toFixedRange=function(t,e,i,o){var r=this.chart&&this.chart.fixedRange,a=b(i,this.translate(t,!0,!this.horiz)),n=b(o,this.translate(e,!0,!this.horiz)),s=r&&(n-a)/r;return s>.7&&s<1.3&&(o?a=n-r:n=a+r),m(a)||(a=n=undefined),{min:a,max:n}},o.prototype.minFromRange=function(){var t,e,i,o=this.range,r={month:"Month",year:"FullYear"}[o.type],a=this.max,n=function(t,e){var i=new Date(t),o=i["get"+r]();return i["set"+r](o+e),o===i["get"+r]()&&i.setDate(0),i.getTime()-t};return m(o)?(t=a-o,i=o):(t=a+n(a,-o.count),this.chart&&(this.chart.fixedRange=a-t)),e=b(this.dataMin,Number.MIN_VALUE),m(t)||(t=e),t<=e&&(t=e,i===undefined&&(i=n(t,o.count)),this.newMax=Math.min(t+i,this.dataMax)),m(a)||(t=undefined),t},k(r.prototype,"init",function(t,o,r){i(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new e(this))}),t.call(this,o,r)}),k(r.prototype,"render",function(t,e,i){var o,r=this,a=r.axes,n=r.rangeSelector;n&&(u(a,function(t){t.updateNames(),t.setScale()}),r.getAxisMargins(),n.render(),o=n.options.verticalAlign,n.options.floating||("bottom"===o?this.extraBottomMargin=!0:"middle"!==o&&(this.extraTopMargin=!0))),t.call(this,e,i)}),k(r.prototype,"update",function(e,i,o,r){var a,n=this,s=n.rangeSelector;this.extraBottomMargin=!1,this.extraTopMargin=!1,s&&(s.render(),a=i.rangeSelector&&i.rangeSelector.verticalAlign||s.options&&s.options.verticalAlign,s.options.floating||("bottom"===a?this.extraBottomMargin=!0:"middle"!==a&&(this.extraTopMargin=!0))),e.call(this,t.merge(!0,i,{chart:{marginBottom:b(i.chart&&i.chart.marginBottom,n.margin.bottom),spacingBottom:b(i.chart&&i.chart.spacingBottom,n.spacing.bottom)}}),o,r)}),k(r.prototype,"redraw",function(t,e,i){var o,r=this.rangeSelector;r&&!r.options.floating&&(r.render(),"bottom"===(o=r.options.verticalAlign)?this.extraBottomMargin=!0:"middle"!==o&&(this.extraTopMargin=!0)),t.call(this,e,i)}),r.prototype.adjustPlotArea=function(){var t,e=this.rangeSelector;this.rangeSelector&&(t=e.getHeight(),this.extraTopMargin&&(this.plotTop+=t),this.extraBottomMargin&&(this.marginBottom+=t))},r.prototype.callbacks.push(function(t){function e(){o=t.xAxis[0].getExtremes(),m(o.min)&&n.render(o.min,o.max)}var o,r,a,n=t.rangeSelector;n&&(a=i(t.xAxis[0],"afterSetExtremes",function(t){n.render(t.min,t.max)}),r=i(t,"redraw",e),e()),i(t,"destroy",function(){n&&(r(),a())})}),t.RangeSelector=e}(t),function(t){var e=t.arrayMax,i=t.arrayMin,o=t.Axis,r=t.Chart,a=t.defined,n=t.each,s=t.extend,l=t.format,h=t.grep,c=t.inArray,p=t.isNumber,d=t.isString,u=t.map,g=t.merge,f=t.pick,x=t.Point,m=t.Renderer,v=t.Series,b=t.splat,y=t.SVGRenderer,M=t.VMLRenderer,k=t.wrap,A=v.prototype,w=A.init,S=A.processData,B=x.prototype.tooltipFormatter;t.StockChart=t.stockChart=function(e,i,o){var a,n=d(e)||e.nodeName,s=arguments[n?1:0],l=s.series,h=t.getOptions(),c=f(s.navigator&&s.navigator.enabled,h.navigator.enabled,!0),p=c?{startOnTick:!1,endOnTick:!1}:null,x={marker:{enabled:!1,radius:2}},m={shadow:!1,borderWidth:0};return s.xAxis=u(b(s.xAxis||{}),function(t){return g({minPadding:0,maxPadding:0,overscroll:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},h.xAxis,t,{type:"datetime",categories:null},p)}),s.yAxis=u(b(s.yAxis||{}),function(t){return a=f(t.opposite,!0),g({labels:{y:-2},opposite:a,showLastLabel:!1,title:{text:null}},h.yAxis,t)}),s.series=null,(s=g({chart:{panning:!0,pinchType:"x"},navigator:{enabled:c},scrollbar:{enabled:f(h.scrollbar.enabled,!0)},rangeSelector:{enabled:f(h.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:x,spline:x,area:x,areaspline:x,arearange:x,areasplinerange:x,column:m,columnrange:m,candlestick:m,ohlc:m}},s,{isStock:!0})).series=l,n?new r(e,s,o):new r(s,i)},k(o.prototype,"autoLabelAlign",function(t){var e,i=this.chart,o=this.options,r=i._labelPanes=i._labelPanes||{},a=this.options.labels;return this.chart.options.isStock&&"yAxis"===this.coll&&!r[e=o.top+","+o.height]&&a.enabled?(15===a.x&&(a.x=0),a.align===undefined&&(a.align="right"),r[e]=this,"right"):t.apply(this,[].slice.call(arguments,1))}),k(o.prototype,"destroy",function(t){var e=this.chart,i=this.options&&this.options.top+","+this.options.height;return i&&e._labelPanes&&e._labelPanes[i]===this&&delete e._labelPanes[i],t.apply(this,Array.prototype.slice.call(arguments,1))}),k(o.prototype,"getPlotLinePath",function(e,i,o,r,s,l){function h(t){var e="xAxis"===t?"yAxis":"xAxis",i=k.options[e];return p(i)?[w[e][i]]:d(i)?[w.get(i)]:u(A,function(t){return t[e]})}var g,x,m,v,b,y,M,k=this,A=this.isLinked&&!this.series?this.linkedParent.series:this.series,w=k.chart,S=w.renderer,B=k.left,P=k.top,D=[],T=[];return"xAxis"!==k.coll&&"yAxis"!==k.coll?e.apply(this,[].slice.call(arguments,1)):(T=h(k.coll),b=k.isXAxis?w.yAxis:w.xAxis,n(b,function(t){if(!a(t.options.id)||-1===t.options.id.indexOf("navigator")){var e=t.isXAxis?"yAxis":"xAxis",i=a(t.options[e])?w[e][t.options[e]]:w[e][0];k===i&&T.push(t)}}),y=T.length?[]:[k.isXAxis?w.yAxis[0]:w.xAxis[0]],n(T,function(e){-1!==c(e,y)||t.find(y,function(t){return t.pos===e.pos&&t.len&&e.len})||y.push(e)}),M=f(l,k.translate(i,null,null,r)),p(M)&&(k.horiz?n(y,function(t){var e;x=t.pos,v=x+t.len,((g=m=Math.round(M+k.transB))<B||g>B+k.width)&&(s?g=m=Math.min(Math.max(B,g),B+k.width):e=!0),e||D.push("M",g,x,"L",m,v)}):n(y,function(t){var e;g=t.pos,m=g+t.len,((x=v=Math.round(P+k.height-M))<P||x>P+k.height)&&(s?x=v=Math.min(Math.max(P,x),k.top+k.height):e=!0),e||D.push("M",g,x,"L",m,v)})),D.length>0?S.crispPolyLine(D,o||1):null)}),y.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=Math.round(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=Math.round(t[i+2])+e%2/2);return t},m===M&&(M.prototype.crispPolyLine=y.prototype.crispPolyLine),k(o.prototype,"hideCrosshair",function(t,e){t.call(this,e),this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}),k(o.prototype,"drawCrosshair",function(t,e,i){if(t.call(this,e,i),a(this.crosshair.label)&&this.crosshair.label.enabled&&this.cross){var o,r,n,h,c,p,d=this.chart,u=this.options.crosshair.label,g=this.horiz,x=this.opposite,m=this.left,v=this.top,b=this.crossLabel,y=u.format,M="",k="inside"===this.options.tickPosition,A=!1!==this.crosshair.snap,w=0;e||(e=this.cross&&this.cross.e),c=g?"center":x?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center",b||(b=this.crossLabel=d.renderer.label(null,null,null,u.shape||"callout").addClass("highcharts-crosshair-label"+(this.series[0]&&" highcharts-color-"+this.series[0].colorIndex)).attr({align:u.align||c,padding:f(u.padding,8),r:f(u.borderRadius,3),zIndex:2}).add(this.labelGroup)).attr({fill:u.backgroundColor||this.series[0]&&this.series[0].color||"#666666",stroke:u.borderColor||"","stroke-width":u.borderWidth||0}).css(s({color:"#ffffff",fontWeight:"normal",fontSize:"11px",textAlign:"center"},u.style)),g?(o=A?i.plotX+m:e.chartX,r=v+(x?0:this.height)):(o=x?this.width+m:0,r=A?i.plotY+v:e.chartY),y||u.formatter||(this.isDatetimeAxis&&(M="%b %d, %Y"),y="{value"+(M?":"+M:"")+"}"),p=A?i[this.isXAxis?"x":"y"]:this.toValue(g?e.chartX:e.chartY),b.attr({text:y?l(y,{value:p}):u.formatter.call(this,p),x:o,y:r,visibility:"visible"}),n=b.getBBox(),g?(k&&!x||!k&&x)&&(r=b.y-n.height):r=b.y-n.height/2,h=g?{left:m-n.x,right:m+this.width-n.x}:{left:"left"===this.labelAlign?m:0,right:"right"===this.labelAlign?m+this.width:d.chartWidth},b.translateX<h.left&&(w=h.left-b.translateX),b.translateX+n.width>=h.right&&(w=-(b.translateX+n.width-h.right)),b.attr({x:o+w,y:r,
anchorX:g?o:this.opposite?0:d.chartWidth,anchorY:g?this.opposite?d.chartHeight:0:r+n.height/2})}}),A.init=function(){w.apply(this,arguments),this.setCompare(this.options.compare)},A.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var o=this.compareValue;if(e!==undefined&&o!==undefined)return"value"===t?e-=o:e=e/o*100-(100===this.options.compareBase?0:100),i&&(i.change=e),e}:null,this.userOptions.compare=t,this.chart.hasRendered&&(this.isDirty=!0)},A.processData=function(){var t,e,i,o,r,a=this,n=-1,s=!0===a.options.compareStart?0:1;if(S.apply(this,arguments),a.xAxis&&a.processedYData)for(e=a.processedXData,o=(i=a.processedYData).length,a.pointArrayMap&&-1===(n=c("close",a.pointArrayMap))&&(n=c(a.pointValKey||"y",a.pointArrayMap)),t=0;t<o-s;t++)if(r=i[t]&&n>-1?i[t][n]:i[t],p(r)&&e[t+s]>=a.xAxis.min&&0!==r){a.compareValue=r;break}},k(A,"getExtremes",function(t){var o;t.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(o=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)],this.dataMin=i(o),this.dataMax=e(o))}),o.prototype.setCompare=function(t,e){this.isXAxis||(n(this.series,function(e){e.setCompare(t)}),f(e,!0)&&this.chart.redraw())},x.prototype.tooltipFormatter=function(e){var i=this;return e=e.replace("{point.change}",(i.change>0?"+":"")+t.numberFormat(i.change,f(i.series.tooltipOptions.changeDecimals,2))),B.apply(this,[e])},k(v.prototype,"render",function(t){this.chart.is3d&&this.chart.is3d()||this.chart.polar||!this.xAxis||this.xAxis.isRadial||(!this.clipBox&&this.animate?(this.clipBox=g(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]?this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}):this.clipBox&&(this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len)),t.call(this)}),k(r.prototype,"getSelectedPoints",function(t){var e=t.call(this);return n(this.series,function(t){t.hasGroupedData&&(e=e.concat(h(t.points||[],function(t){return t.selected})))}),e}),k(r.prototype,"update",function(t,e){return"scrollbar"in e&&this.navigator&&(g(!0,this.options.scrollbar,e.scrollbar),this.navigator.update({},!1),delete e.scrollbar),t.apply(this,Array.prototype.slice.call(arguments,1))})}(t)});