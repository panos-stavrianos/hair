"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,o,i,s,n,r,a,h,c,p,u,l;o=(e=t).hasTouch,i=e.merge,s=e.wrap,n=e.each,r=e.isNumber,a=e.addEvent,h=e.relativeLength,c=e.objectEach,p=e.Axis,u=e.Pointer,l={minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}},i(!0,p.prototype.defaultYAxisOptions,l),e.AxisResizer=function(t){this.init(t)},e.AxisResizer.prototype={init:function(t,e){this.axis=t,this.options=t.options.resize,this.render(),e||this.addMouseEvents()},render:function(){var t,e=this,o=e.axis,i=o.chart,s=e.options,n=s.x,r=s.y,a=Math.min(Math.max(o.top+o.height+r,i.plotTop),i.plotTop+i.plotHeight),h={};h={cursor:s.cursor,stroke:s.lineColor,"stroke-width":s.lineWidth,dashstyle:s.lineDashStyle},e.lastPos=a-r,e.controlLine||(e.controlLine=i.renderer.path().addClass("highcharts-axis-resizer")),e.controlLine.add(o.axisGroup),t=s.lineWidth,h.d=i.renderer.crispLine(["M",o.left+n,a,"L",o.left+o.width+n,a],t),e.controlLine.attr(h)},addMouseEvents:function(){var t,e,i,s=this,n=s.controlLine.element,r=s.axis.chart.container,h=[];s.mouseMoveHandler=t=function(t){s.onMouseMove(t)},s.mouseUpHandler=e=function(t){s.onMouseUp(t)},s.mouseDownHandler=i=function(t){s.onMouseDown(t)},h.push(a(r,"mousemove",t),a(r.ownerDocument,"mouseup",e),a(n,"mousedown",i)),o&&h.push(a(r,"touchmove",t),a(r.ownerDocument,"touchend",e),a(n,"touchstart",i)),s.eventsToUnbind=h},onMouseMove:function(t){t.touches&&0===t.touches[0].pageX||this.grabbed&&(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y))},onMouseUp:function(t){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},onMouseDown:function(){this.axis.chart.pointer.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0},updateAxes:function(t){var o,i=this,s=i.axis.chart,a=i.options.controlledAxis,c=0===a.next.length?[e.inArray(i.axis,s.yAxis)+1]:a.next,p=[i.axis].concat(a.prev),u=[],l=!1,d=s.plotTop,x=s.plotHeight,y=d+x,m=function(t,e,o){return Math.round(Math.min(Math.max(t,e),o))};t=Math.max(Math.min(t,y),d),(o=t-i.lastPos)*o<1||(n([p,c],function(e,a){n(e,function(e,n){var c,p,f,g,v=r(e)?s.yAxis[e]:a||n?s.get(e):e,M=v&&v.options,z={},A=0;M&&(p=v.top,f=Math.round(h(M.minLength,x)),g=Math.round(h(M.maxLength,x)),a?(o=t-i.lastPos,c=m(v.len-o,f,g),(p=v.top+o)+c>y&&(t+=A=y-c-p,p+=A),p<d&&(p=d)+c>y&&(c=x),c===f&&(l=!0),u.push({axis:v,options:{top:Math.round(p),height:c}})):((c=m(t-p,f,g))===g&&(l=!0),t=p+c,u.push({axis:v,options:{height:c}})),z.height=c)})}),l||(n(u,function(t){t.axis.update(t.options,!1)}),s.redraw(!1)))},destroy:function(){var t=this;delete t.axis.resizer,this.eventsToUnbind&&n(this.eventsToUnbind,function(t){t()}),t.controlLine.destroy(),c(t,function(e,o){t[o]=null})}},p.prototype.keepProps.push("resizer"),s(p.prototype,"render",function(t){t.apply(this,Array.prototype.slice.call(arguments,1));var o,i=this,s=i.resizer,n=i.options.resize;n&&(o=!1!==n.enabled,s?o?s.init(i,!0):s.destroy():o&&(i.resizer=new e.AxisResizer(i)))}),s(p.prototype,"destroy",function(t,e){!e&&this.resizer&&this.resizer.destroy(),t.apply(this,Array.prototype.slice.call(arguments,1))}),s(u.prototype,"runPointActions",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))})});