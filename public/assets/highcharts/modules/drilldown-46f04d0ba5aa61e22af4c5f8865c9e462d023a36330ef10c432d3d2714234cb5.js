"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(t){var i=t.noop,e=t.color,o=t.defaultOptions,l=t.each,r=t.extend,n=t.format,s=t.objectEach,a=t.pick,d=t.wrap,p=t.Chart,h=t.seriesTypes,c=h.pie,u=h.column,m=t.Tick,g=t.fireEvent,w=t.inArray,f=1;r(o.lang,{drillUpText:"\u25c1 Back to {series.name}"}),o.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},t.SVGRenderer.prototype.Element.prototype.fadeIn=function(t){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:a(this.newOpacity,1)},t||{duration:250})},p.prototype.addSeriesAsDrilldown=function(t,i){this.addSingleSeriesAsDrilldown(t,i),this.applyDrilldown()},p.prototype.addSingleSeriesAsDrilldown=function(o,n){var s,a,d,p,h,c,u=o.series,m=u.xAxis,g=u.yAxis,v=[],y=[];c={color:o.color||u.color},this.drilldownLevels||(this.drilldownLevels=[]),p=u.options._levelNumber||0,(h=this.drilldownLevels[this.drilldownLevels.length-1])&&h.levelNumber!==p&&(h=undefined),n=r(r({_ddSeriesId:f++},c),n),a=w(o,u.points),l(u.chart.series,function(t){t.xAxis!==m||t.isDrilling||(t.options._ddSeriesId=t.options._ddSeriesId||f++,t.options._colorIndex=t.userOptions._colorIndex,t.options._levelNumber=t.options._levelNumber||p,h?(v=h.levelSeries,y=h.levelSeriesOptions):(v.push(t),y.push(t.options)))}),d=r({levelNumber:p,seriesOptions:u.options,levelSeriesOptions:y,levelSeries:v,shapeArgs:o.shapeArgs,bBox:o.graphic?o.graphic.getBBox():{},color:o.isNull?new t.Color(e).setOpacity(0).get():e,lowerSeriesOptions:n,pointOptions:u.options.data[a],pointIndex:a,oldExtremes:{xMin:m&&m.userMin,xMax:m&&m.userMax,yMin:g&&g.userMin,yMax:g&&g.userMax},resetZoomButton:this.resetZoomButton},c),this.drilldownLevels.push(d),m&&m.names&&(m.names.length=0),(s=d.lowerSeries=this.addSeries(n,!1)).options._levelNumber=p+1,m&&(m.oldPos=m.pos,m.userMin=m.userMax=null,g.userMin=g.userMax=null),u.type===s.type&&(s.animate=s.animateDrilldown||i,s.options.animation=!0)},p.prototype.applyDrilldown=function(){var t,i=this.drilldownLevels;i&&i.length>0&&(t=i[i.length-1].levelNumber,l(this.drilldownLevels,function(i){i.levelNumber===t&&l(i.levelSeries,function(i){i.options&&i.options._levelNumber===t&&i.remove(!1)})})),this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton),this.pointer.reset(),this.redraw(),this.showDrillUpButton()},p.prototype.getDrilldownBackText=function(){var t,i=this.drilldownLevels;if(i&&i.length>0)return(t=i[i.length-1]).series=t.seriesOptions,n(this.options.lang.drillUpText,t)},p.prototype.showDrillUpButton=function(){var t,i,e=this,o=this.getDrilldownBackText(),l=e.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:o}).align():(i=(t=l.theme)&&t.states,this.drillUpButton=this.renderer.button(o,null,null,function(){e.drillUp()},t,i&&i.hover,i&&i.select).addClass("highcharts-drillup-button").attr({align:l.position.align,zIndex:7}).add().align(l.position,!1,l.relativeTo||"plotBox"))},p.prototype.drillUp=function(){for(var t,i,e,o,r,n=this,s=n.drilldownLevels,a=s[s.length-1].levelNumber,d=s.length,p=n.series,h=function(t){var r;l(p,function(i){i.options._ddSeriesId===t._ddSeriesId&&(r=i)}),(r=r||n.addSeries(t,!1)).type===e.type&&r.animateDrillupTo&&(r.animate=r.animateDrillupTo),t===i.seriesOptions&&(o=r)};d--;)if((i=s[d]).levelNumber===a){if(s.pop(),!(e=i.lowerSeries).chart)for(t=p.length;t--;)if(p[t].options.id===i.lowerSeriesOptions.id&&p[t].options._levelNumber===a+1){e=p[t];break}e.xData=[],l(i.levelSeriesOptions,h),g(n,"drillup",{seriesOptions:i.seriesOptions}),o.type===e.type&&(o.drilldownLevel=i,o.options.animation=n.options.drilldown.animation,e.animateDrillupFrom&&e.chart&&e.animateDrillupFrom(i)),o.options._levelNumber=a,e.remove(!1),o.xAxis&&(r=i.oldExtremes,o.xAxis.setExtremes(r.xMin,r.xMax,!1),o.yAxis.setExtremes(r.yMin,r.yMax,!1)),i.resetZoomButton&&(n.resetZoomButton=i.resetZoomButton,n.resetZoomButton.show())}g(n,"drillupall"),this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[]},d(p.prototype,"showResetZoom",function(t){this.drillUpButton||t.apply(this,Array.prototype.slice.call(arguments,1))}),u.prototype.animateDrillupTo=function(t){if(!t){var e=this,o=e.drilldownLevel;l(this.points,function(t){var i=t.dataLabel;t.graphic&&t.graphic.hide(),i&&(i.hidden="hidden"===i.attr("visibility"),i.hidden||(i.hide(),t.connector&&t.connector.hide()))}),setTimeout(function(){e.points&&l(e.points,function(t,i){var e=i===(o&&o.pointIndex)?"show":"fadeIn",l="show"===e||undefined,r=t.dataLabel;t.graphic&&t.graphic[e](l),r&&!r.hidden&&(r[e](l),t.connector&&t.connector[e](l))})},Math.max(this.chart.options.drilldown.animation.duration-50,0)),this.animate=i}},u.prototype.animateDrilldown=function(t){var i,e=this,o=this.chart.drilldownLevels,n=this.chart.options.drilldown.animation,s=this.xAxis;t||(l(o,function(t){e.options._ddSeriesId===t.lowerSeriesOptions._ddSeriesId&&((i=t.shapeArgs).fill=t.color)}),i.x+=a(s.oldPos,s.pos)-s.pos,l(this.points,function(t){t.shapeArgs.fill=t.color,t.graphic&&t.graphic.attr(i).animate(r(t.shapeArgs,{fill:t.color||e.color}),n),t.dataLabel&&t.dataLabel.fadeIn(n)}),this.animate=null)},u.prototype.animateDrillupFrom=function(i){var e=this.chart.options.drilldown.animation,o=this.group,r=o!==this.chart.columnGroup,n=this;l(n.trackerGroups,function(t){n[t]&&n[t].on("mouseover")}),r&&delete this.group,l(this.points,function(l){var n=l.graphic,s=i.shapeArgs,a=function(){n.destroy(),o&&r&&(o=o.destroy())};n&&(delete l.graphic,s.fill=i.color,e?n.animate(s,t.merge(e,{complete:a})):(n.attr(s),a()))})},c&&r(c.prototype,{animateDrillupTo:u.prototype.animateDrillupTo,animateDrillupFrom:u.prototype.animateDrillupFrom,animateDrilldown:function(i){var e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],o=this.chart.options.drilldown.animation,r=e.shapeArgs,n=r.start,s=(r.end-n)/this.points.length;i||(l(this.points,function(i,l){var a=i.shapeArgs;r.fill=e.color,a.fill=i.color,i.graphic&&i.graphic.attr(t.merge(r,{start:n+l*s,end:n+(l+1)*s}))[o?"animate":"attr"](a,o)}),this.animate=null)}}),t.Point.prototype.doDrilldown=function(t,i,e){var o,l=this.series.chart,r=l.options.drilldown,n=(r.series||[]).length;for(l.ddDupes||(l.ddDupes=[]);n--&&!o;)r.series[n].id===this.drilldown&&-1===w(this.drilldown,l.ddDupes)&&(o=r.series[n],l.ddDupes.push(this.drilldown));g(l,"drilldown",{point:this,seriesOptions:o,category:i,originalEvent:e,points:i!==undefined&&this.series.xAxis.getDDPoints(i).slice(0)},function(i){var e=i.point.series&&i.point.series.chart,o=i.seriesOptions;e&&o&&(t?e.addSingleSeriesAsDrilldown(i.point,o):e.addSeriesAsDrilldown(i.point,o))})},t.Axis.prototype.drilldownCategory=function(t,i){s(this.getDDPoints(t),function(e){e&&e.series&&e.series.visible&&e.doDrilldown&&e.doDrilldown(!0,t,i)}),this.chart.applyDrilldown()},t.Axis.prototype.getDDPoints=function(t){var i=[];return l(this.series,function(e){var o,l=e.xData,r=e.points;for(o=0;o<l.length;o++)if(l[o]===t&&e.options.data[o]&&e.options.data[o].drilldown){i.push(!r||r[o]);break}}),i},m.prototype.drillable=function(){var i=this.pos,e=this.label,o=this.axis,l="xAxis"===o.coll&&o.getDDPoints,r=l&&o.getDDPoints(i);l&&(e&&r.length?(e.drillable=!0,e.basicStyles||(e.basicStyles=t.merge(e.styles)),e.addClass("highcharts-drilldown-axis-label").css(o.chart.options.drilldown.activeAxisLabelStyle).on("click",function(t){o.drilldownCategory(i,t)})):e&&e.drillable&&(e.styles={},e.css(e.basicStyles),e.on("click",null),e.removeClass("highcharts-drilldown-axis-label")))},d(m.prototype,"addLabel",function(t){t.call(this),this.drillable()}),d(t.Point.prototype,"init",function(i,e,o,l){var r=i.call(this,e,o,l),n=e.xAxis,s=n&&n.ticks[l];return r.drilldown&&t.addEvent(r,"click",function(t){e.xAxis&&!1===e.chart.options.drilldown.allowPointDrilldown?e.xAxis.drilldownCategory(r.x,t):r.doDrilldown(undefined,undefined,t)}),s&&s.drillable(),r}),d(t.Series.prototype,"drawDataLabels",function(t){var i=this.chart.options.drilldown.activeDataLabelStyle,e=this.chart.renderer;t.call(this),l(this.points,function(t){var o=t.options.dataLabels,l=a(t.dlOptions,o&&o.style,{});t.drilldown&&t.dataLabel&&("contrast"===i.color&&(l.color=e.getContrast(t.color||this.color)),o&&o.color&&(l.color=o.color),t.dataLabel.addClass("highcharts-drilldown-data-label"),t.dataLabel.css(i).css(l))},this)});var v=function(t,i,e){t[e?"addClass":"removeClass"]("highcharts-drilldown-point"),t.css({cursor:i})},y=function(t){t.call(this),l(this.points,function(t){t.drilldown&&t.graphic&&v(t.graphic,"pointer",!0)})},x=function(t,i){var e=t.apply(this,Array.prototype.slice.call(arguments,1));return this.drilldown&&this.series.halo&&"hover"===i?v(this.series.halo,"pointer",!0):this.series.halo&&v(this.series.halo,"auto",!1),e};s(h,function(t){d(t.prototype,"drawTracker",y),d(t.prototype.pointClass.prototype,"setState",x)})}(t)});