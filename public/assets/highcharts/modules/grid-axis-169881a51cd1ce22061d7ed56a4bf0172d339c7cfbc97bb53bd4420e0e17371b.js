"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,i,a,o,r,s,n,l,h,p;i=(e=t).dateFormat,a=e.each,o=e.isObject,r=e.pick,s=e.wrap,n=e.Axis,l=e.Chart,h=e.Tick,p={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"},n.prototype.isOuterAxis=function(){var t=this,e=-1,i=!0;return a(this.chart.axes,function(a,o){if(a.side===t.side)if(a===t)e=o;else if(e>=0&&o>e)return void(i=!1)}),i},h.prototype.getLabelWidth=function(){return this.label.getBBox().width},n.prototype.getMaxLabelLength=function(t){var e=this.tickPositions,i=this.ticks,o=0;return this.maxLabelLength&&!t||(a(e,function(t){(t=i[t])&&t.labelLength>o&&(o=t.labelLength)}),this.maxLabelLength=o),this.maxLabelLength},n.prototype.addTitle=function(){var t,e,i,a=this,o=a.chart.renderer,s=a.axisParent,n=a.horiz,l=a.opposite,h=a.options,p=h.title;t=a.hasData(),a.showAxis=e=t||r(h.showEmpty,!0),h.title="",a.axisTitle||((i=p.textAlign)||(i=(n?{low:"left",middle:"center",high:"right"}:{low:l?"right":"left",middle:"center",high:l?"left":"right"})[p.align]),a.axisTitle=o.text(p.text,0,0,p.useHTML).attr({zIndex:7,rotation:p.rotation||0,align:i}).addClass("highcharts-axis-title").css(p.style).add(s),a.axisTitle.isNew=!0),a.axisTitle[e?"show":"hide"](!0)},e.dateFormats={W:function(t){var e,i=new Date(t),a=0===i.getUTCDay()?7:i.getUTCDay(),o=i.getTime(),r=new Date(i.getUTCFullYear(),0,1,-6);return i.setDate(i.getUTCDate()+4-a),e=Math.floor((o-r)/864e5),1+Math.floor(e/7)},E:function(t){return i("%a",t,!0).charAt(0)}},s(h.prototype,"addLabel",function(t){var e=this.axis,i=e.options.categories!==undefined,a=e.tickPositions,o=a[a.length-1],r=this.pos!==o;(!e.options.grid||i||r)&&t.apply(this)}),s(h.prototype,"getLabelPosition",function(t,e,i,a){var o,r,s,n,l,h,d,c,x=t.apply(this,Array.prototype.slice.call(arguments,1)),g=this.axis,f=g.options,u=f.tickInterval||1;return f.grid&&(n=f.labels.style.fontSize,h=(l=g.chart.renderer.fontMetrics(n,a)).b,d=l.h,g.horiz&&f.categories===undefined?(s=g.axisGroup.getBBox().height,r=this.pos+u/2,x.x=g.translate(r)+g.left,c=s/2+d/2-Math.abs(d-h),g.side===p.top?x.y=i-c:x.y=i+c):(f.categories===undefined&&(r=this.pos+u/2,x.y=g.translate(r)+g.top+h/2),o=this.getLabelWidth()/2-g.maxLabelLength/2,g.side===p.left?x.x+=o:x.x-=o)),x}),s(n.prototype,"tickSize",function(t){var e,i,a=this,o=t.apply(a,Array.prototype.slice.call(arguments,1));return a.options.grid&&!a.horiz&&(e=2*Math.abs(a.defaultLeftAxisOptions.labels.x),a.maxLabelLength||(a.maxLabelLength=a.getMaxLabelLength()),i=a.maxLabelLength+e,o[0]=i),o}),s(n.prototype,"getOffset",function(t){var e,i,a=this,s=a.chart.axisOffset,n=a.side,l=a.options,h=l.title,p=h&&h.text&&!1!==h.enabled;a.options.grid&&o(a.options.title)?(i=a.tickSize("tick")[0],s[n]&&i&&(e=s[n]+i),p&&a.addTitle(),t.apply(a,Array.prototype.slice.call(arguments,1)),s[n]=r(e,s[n]),l.title=h):t.apply(a,Array.prototype.slice.call(arguments,1))}),s(n.prototype,"renderUnsquish",function(t){this.options.grid&&(this.labelRotation=0,this.options.labels.rotation=0),t.apply(this)}),s(n.prototype,"setOptions",function(t,e){var i=this;e.grid&&i.horiz&&(e.startOnTick=!0,e.minPadding=0,e.endOnTick=!0),t.apply(this,Array.prototype.slice.call(arguments,1))}),s(n.prototype,"render",function(t){var e,i,a,o,r,s,n,l,h,d=this,c=d.options,x=d.chart.renderer;c.grid?(e=2*Math.abs(d.defaultLeftAxisOptions.labels.x),i=d.maxLabelLength+e,a=c.lineWidth,d.rightWall&&d.rightWall.destroy(),t.apply(d),h=d.axisGroup.getBBox(),d.horiz&&(d.rightWall=x.path(["M",h.x+d.width+1,h.y,"L",h.x+d.width+1,h.y+h.height]).attr({stroke:c.tickColor||"#ccd6eb","stroke-width":c.tickWidth||1,zIndex:7,"class":"grid-wall"}).add(d.axisGroup)),d.isOuterAxis()&&d.axisLine&&(d.horiz&&(i=h.height-1),a&&(n=(o=d.getLinePath(a)).indexOf("M")+1,l=o.indexOf("L")+1,r=o.indexOf("M")+2,s=o.indexOf("L")+2,d.side!==p.top&&d.side!==p.left||(i=-i),d.horiz?(o[r]=o[r]+i,o[s]=o[s]+i):(o[n]=o[n]+i,o[l]=o[l]+i),d.axisLineExtra?d.axisLineExtra.animate({d:o}):d.axisLineExtra=x.path(o).attr({stroke:c.lineColor,"stroke-width":a,zIndex:7}).add(d.axisGroup),d.axisLine[d.showAxis?"show":"hide"](!0)))):t.apply(d)}),s(l.prototype,"render",function(t){var e,i,o=25/11;a(this.axes,function(t){var a=t.options;a.grid&&(i=a.labels.style.fontSize,e=t.chart.renderer.fontMetrics(i),"datetime"===a.type&&(a.units=[["millisecond",[1]],["second",[1]],["minute",[1]],["hour",[1]],["day",[1]],["week",[1]],["month",[1]],["year",null]]),t.horiz?a.tickLength=a.cellHeight||e.h*o:(a.tickWidth=1,a.lineWidth||(a.lineWidth=1)))}),t.apply(this)})});