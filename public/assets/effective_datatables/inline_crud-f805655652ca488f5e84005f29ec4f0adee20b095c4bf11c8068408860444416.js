(function(){var e,t,a,r,n,l,o,i,s;$(document).on("ajax:beforeSend",".dataTables_wrapper .col-actions",function(e,t,a){var r,o,i;return r=$(e.target),i=$(e.target).closest("table"),""+r.data("inline")=="false"||(o=$.param({_datatable_id:i.attr("id"),_datatable_attributes:i.data("attributes"),_datatable_action:!0}),a.url+=(-1===a.url.indexOf("?")?"?":"&")+o,r.closest(".effective-datatables-inline-row,table.dataTable").hasClass("effective-datatables-inline-row")||("THEAD"===r.closest("tr").parent().prop("tagName")?l(r):n(r)),!0)}),$(document).on("ajax:success",".dataTables_wrapper .col-actions",function(a,n){var l;if(""+(l=$(a.target)).data("inline")=="false")return!0;if(n.length>0){if(0===n.indexOf("Turbolinks.clearCache()")&&n.includes("Turbolinks.visit("))return!0;if(n.indexOf("<html")>=0)return!0}return"get"===(l.data("method")||"get")?"THEAD"===l.closest("tr").parent().prop("tagName")?r(l):t(l):e(l),EffectiveForm.remote_form_payload="",EffectiveForm.remote_form_commit="",EffectiveForm.remote_form_flash="",!0}),$(document).on("ajax:error",".dataTables_wrapper",function(e){var t;return""+(t=$(e.target)).data("inline")=="false"||(a(t),EffectiveForm.remote_form_payload="",EffectiveForm.remote_form_commit="",EffectiveForm.remote_form_flash="",!0)}),$(document).on("ajax:beforeSend",".dataTables_wrapper .col-inline-form",function(e,t,a){var r,n;return n=$(e.target).closest("table"),r=$.param({_datatable_id:n.attr("id"),_datatable_attributes:n.data("attributes")}),a.url+=(-1===a.url.indexOf("?")?"?":"&")+r,!0}),$(document).on("effective-form:success",".dataTables_wrapper .col-inline-form",function(e,t){var a,r,n;return r=(n=$(e.target).closest("tr")).closest("table"),n.hasClass("effective-datatables-new-resource")?(r.DataTable().flash(t||"Item created","success"),n.fadeOut("slow"),(a=r.children("thead").find("th.col-actions")).children("svg").remove(),a.children("a").fadeIn()):(r.DataTable().flash(t||"Item updated","success"),n.fadeOut("slow")),r.DataTable().draw()}),l=function(e){var t,a;return t=e.closest("table"),(a=e.closest("th")).children("a").hide(),a.append(t.data("spinner")),t.DataTable().flash(),t.one("draw.dt",function(e){if(e.target===e.currentTarget)return a.find("a").show().siblings("svg").remove()})},r=function(e){var t,a,r;return t=(a=e.closest("tr")).closest("table"),e.siblings("svg").remove(),r=o(a.children("th").length,EffectiveForm.remote_form_payload),a=$("<tr class='effective-datatables-inline-row effective-datatables-new-resource' role='row'>"+r+"</tr>"),t.children("tbody").prepend(a),s(t),a.trigger("turbolinks:load"),a.hide().fadeIn()},n=function(e){var t,a;return t=e.closest("table"),(a=e.closest("td")).find(".dropdown-toggle").dropdown("toggle"),a.children(".btn-group").hide(),a.children("a").hide(),a.append(t.data("spinner")),t.DataTable().flash()},t=function(e){var t,a,r;return t=(a=e.closest("tr")).closest("table"),r=o(a.children("td").length,EffectiveForm.remote_form_payload),a.data("inline-form-original-html",a.children().detach()),a.html(r),a.addClass("effective-datatables-inline-row"),s(t),a.trigger("turbolinks:load"),a.hide().fadeIn()},e=function(e){var t,a;return t=e.closest("table"),EffectiveForm.remote_form_flash.length>0?(a=EffectiveForm.remote_form_flash[0],t.DataTable().flash(a[1],a[0])):t.DataTable().flash("Successfully "+e.attr("title"),"success"),t.DataTable().draw()},a=function(e){var t,a;return t=e.closest("table"),(a=e.closest("td")).children(".btn-group").show(),a.children("svg").hide(),i(t),t.DataTable().flash("unable to "+(e.attr("title")||"complete action"),"danger")},o=function(e,t){return"<td class='col-inline-form' colspan='"+(e-1)+"'><div class='container'>"+t+"</div></td><td class='col-actions col-actions-inline-form'><a href='#' class='btn btn-sm btn-outline-primary' title='Cancel' data-role='inline-form-cancel'>Cancel</a></td>"},s=function(e){var t;return t=e.closest(".dataTables_wrapper").addClass("effective-datatables-inline-expanded"),e.on("draw.dt",function(e){if(e.target===e.currentTarget)return t.removeClass("effective-datatables-inline-expanded")})},i=function(e){var t;if(0===(t=e.closest(".dataTables_wrapper")).find(".effective-datatables-inline-row").length)return t.removeClass("effective-datatables-inline-expanded")},$(document).on("click",".dataTables_wrapper a[data-role='inline-form-cancel']",function(e){var t;return(t=$(e.currentTarget).closest("tr")).hasClass("effective-datatables-new-resource")?t.fadeOut("slow",function(){var e,t;return(e=(t=$(this).closest("table")).children("thead").find("th.col-actions")).children("svg").remove(),e.children("a").fadeIn(),$(this).remove(),i(t)}):t.fadeOut("slow",function(){var e,a,r;return e=$(this).closest("table"),t.html(t.data("inline-form-original-html")),(a=t.children(".col-actions").first()).children("svg").remove(),(r=a.find(".dropdown-toggle")).parent().hasClass("show")&&r.dropdown("toggle"),a.children(".btn-group").show(),a.children("a").show(),t.removeClass("effective-datatables-inline-row").fadeIn(),i(e)}),!1})}).call(this);